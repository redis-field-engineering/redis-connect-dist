<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Redis Connect</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Redis Connect</h1>
<div class="details">
<span id="revnumber">version 0.11.0</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction</a></li>
<li><a href="#table-of-contents">2. Table of Contents</a></li>
<li><a href="#key-terms">3. Key Terms</a></li>
<li><a href="#source-distributions">4. Source Distributions</a></li>
<li><a href="#supported-sources">5. Supported Sources</a></li>
<li><a href="#redis-connect-architecture">6. Redis Connect Architecture</a>
<ul class="sectlevel2">
<li><a href="#Redis_Connect_Architecture_Overview">6.1. Overview</a></li>
<li><a href="#distributed-consensus">6.2. Distributed Consensus</a></li>
<li><a href="#job-execution">6.3. Job Execution</a></li>
<li><a href="#job-management">6.4. Job Management</a></li>
<li><a href="#cli">6.5. CLI</a></li>
<li><a href="#job-management-database">6.6. Job Management Database</a></li>
<li><a href="#linear-scalability">6.7. Linear Scalability</a></li>
<li><a href="#high-availability">6.8. High Availability</a></li>
</ul>
</li>
<li><a href="#production-readiness">7. Production Readiness</a>
<ul class="sectlevel2">
<li><a href="#capacity-estimation">7.1. Capacity Estimation</a></li>
<li><a href="#operating-system">7.2. Operating System</a></li>
<li><a href="#environment-variables">7.3. Environment Variables</a></li>
<li><a href="#logging">7.4. Logging</a></li>
<li><a href="#monitoring">7.5. Monitoring</a></li>
<li><a href="#security">7.6. Security</a></li>
<li><a href="#high-availability-2">7.7. High availability</a></li>
<li><a href="#multi-region-deployment">7.8. Multi-region deployment</a></li>
</ul>
</li>
<li><a href="#configuration-overview">8. Configuration Overview</a>
<ul class="sectlevel2">
<li><a href="#cluster-instance-configuration">8.1. Cluster Instance Configuration</a></li>
<li><a href="#job-configuration">8.2. Job Configuration</a></li>
<li><a href="#credentials-files">8.3. Credentials files</a></li>
</ul>
</li>
<li><a href="#configurations">9. Configurations</a>
<ul class="sectlevel2">
<li><a href="#cluster-configurations">9.1. Cluster Configurations</a></li>
<li><a href="#job-manager-services-properties">9.2. Job manager services properties</a></li>
<li><a href="#rest-api-properties">9.3. REST API Properties</a></li>
<li><a href="#job-manager-database-properties">9.4. Job Manager Database Properties</a></li>
<li><a href="#job-manager-credentials-properties">9.5. Job Manager Credentials Properties</a></li>
<li><a href="#email-alerting-properties">9.6. Email Alerting Properties</a></li>
</ul>
</li>
<li><a href="#job-configuration-main">10. Job Configurations</a>
<ul class="sectlevel2">
<li><a href="#job-properties">10.1. Job properties</a></li>
<li><a href="#job-pipeline-properties">10.2. Job Pipeline Properties</a></li>
<li><a href="#job-pipeline-stage-properties">10.3. Job Pipeline Stage Properties</a></li>
<li><a href="#job-source-properties">10.4. Job Source Properties</a></li>
<li><a href="#job-source-database-properties">10.5. Job Source Database Properties</a></li>
<li><a href="#job-source-table-column-properties">10.6. Job Source Table Column Properties</a></li>
<li><a href="#job-source-table-initial-load-properties">10.7. Job Source Table Initial Load Properties</a></li>
</ul>
</li>
<li><a href="#database-configuration">11. Database Configuration</a></li>
<li><a href="#custom-database-properties">12. Custom Database Properties</a>
<ul class="sectlevel2">
<li><a href="#rdbms-properties">12.1. RDBMS Properties</a></li>
<li><a href="#mongodb-properties">12.2. MongoDB Properties</a></li>
<li><a href="#files-connector-properties">12.3. Files Connector Properties</a></li>
<li><a href="#gemfire-properties">12.4. Gemfire Properties</a></li>
<li><a href="#redis-target-properties">12.5. Redis Target Properties</a></li>
<li><a href="#redis-message-broker-properties">12.6. Redis Message Broker Properties</a></li>
<li><a href="#splunk-stream-properties">12.7. Splunk Stream Properties</a></li>
<li><a href="#in-memory-queue-properties">12.8. In-Memory Queue Properties</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Redis Connect is a distributed platform that enables real-time event streaming, transformation, and propagation of
changed-data events from heterogeneous data platforms (e.g., Oracle, MongoDB, Gemfire, etc.) to Redis Enterprise,
Redis Cloud, and Azure Cache for Redis Enterprise.</p>
</div>
<div class="paragraph">
<p>Redis Connect can be easily installed, configured, and deployed to keep Redis continuously synced with
committed operations persisted by the <a href="#source">source</a> to its <a href="#log">transactional log</a>, typically using a proprietary
<a href="https://en.wikipedia.org/wiki/Change_data_capture">change data capture</a> process.</p>
</div>
<div class="paragraph">
<p>With Redis Connect, users can continue their reliance on the system of record and, in parallel,
offload read-intensive workloads to Redis for real-time performance and reduced costs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="table-of-contents"><a class="anchor" href="#table-of-contents"></a>2. Table of Contents</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#key-terms">Key Terms</a></p>
</li>
<li>
<p><a href="#source-distributions">Source Distributions</a></p>
</li>
<li>
<p><a href="#supported-sources">Supported Sources</a></p>
</li>
<li>
<p><a href="#redis-connect-architecture">Redis Connect Architecture</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#Redis_Connect_Architecture_Overview">Overview</a></p>
</li>
<li>
<p><a href="#distributed-consensus">Distributed Consensus</a></p>
</li>
<li>
<p><a href="#job-execution">Job Execution</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#Job_Execution_Overview">Overview</a></p>
</li>
<li>
<p><a href="#offset-management">Offset Management</a></p>
</li>
<li>
<p><a href="#initial-load">Initial Load</a></p>
</li>
<li>
<p><a href="#delivery-guarantees">Delivery Guarantees</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#no_data_loss">No Data Loss</a></p>
</li>
<li>
<p><a href="#at_least_once">at-least-once</a></p>
</li>
<li>
<p><a href="#exactly_once">exactly-once</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#job-capacity">Job Capacity</a></p>
</li>
<li>
<p><a href="#custom-stages">Custom Stages</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#job-management">Job Management</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#Job_Management_Overview">Overview</a></p>
</li>
<li>
<p><a href="#job-claimer">Job Claimer</a></p>
</li>
<li>
<p><a href="#job-reaper">Job Reaper</a></p>
</li>
<li>
<p><a href="#job-manager">Job Manager</a></p>
</li>
<li>
<p><a href="#job-orchestrator">Job Orchestrator</a></p>
</li>
<li>
<p><a href="#metrics-reporter">Metrics Reporter</a></p>
</li>
<li>
<p><a href="#rest-api-swagger-ui">REST API &amp; SWAGGER UI</a></p>
</li>
<li>
<p><a href="#cli">CLI</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#job-management-database">Job Management Database</a></p>
</li>
<li>
<p><a href="#linear-scalability">Linear Scalability</a></p>
</li>
<li>
<p><a href="#high-availability">High Availability</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#redis-connect-instance-failure">Redis Connect Instance Failure</a></p>
</li>
<li>
<p><a href="#virtual-machine-cloud-instance-failure">Virtual Machine / Cloud Instance Failure</a></p>
</li>
<li>
<p><a href="#network-partition">Network Partition</a></p>
</li>
<li>
<p><a href="#source-connection-failure">Source Connection Failure</a></p>
</li>
<li>
<p><a href="#target-redis-connection-failure">Target Redis Connection Failure</a></p>
</li>
<li>
<p><a href="#target-redis-slow-consumer">Target Redis Slow Consumer</a></p>
</li>
<li>
<p><a href="#recovery-time-considerations">Recovery Time Considerations</a></p>
</li>
<li>
<p><a href="#graceful-failure">Graceful Failure</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#production-readiness">Production Readiness</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#capacity-estimation">Capacity Estimation</a></p>
</li>
<li>
<p><a href="#operating-system">Operating System</a></p>
</li>
<li>
<p><a href="#environment-variables">Environment Variables</a></p>
</li>
<li>
<p><a href="#logging">Logging</a></p>
</li>
<li>
<p><a href="#monitoring">Monitoring</a></p>
</li>
<li>
<p><a href="#security">Security</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#tlsssl-support">TLS/SSL Support</a></p>
</li>
<li>
<p><a href="#job-management-database-acls">Job Management Database ACLs</a></p>
</li>
<li>
<p><a href="#authentication-credentials">Authentication Credentials</a></p>
</li>
<li>
<p><a href="#securing-credentials-files">Securing Credentials Files</a></p>
</li>
<li>
<p><a href="#credential-rotation">Credential Rotation</a></p>
</li>
<li>
<p><a href="#secrets-management">Secrets Management</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#configurations">Configurations</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#cluster-configurations">Cluster Configurations</a></p>
</li>
<li>
<p><a href="#job-configuration-main">Job Configurations</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="key-terms"><a class="anchor" href="#key-terms"></a>3. Key Terms</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For efficiency, let&#8217;s define the following terms to be used throughout the remainder of these docs:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="checkpoint"></a> checkpoint</dt>
<dd>
<p>Dictionary of key/value pairs that include a composition of
<a href="https://en.wikipedia.org/wiki/Offset_(computer_science)">offset</a>-related fields for the
purpose of uniquely identifying an exact row in the <a href="#source">source&#8217;s</a> <a href="#log">transactional log</a>. See <a href="#offset-management">Offset Management</a> for more
details.</p>
</dd>
<dt class="hdlist1"><a id="checkpoint_database"></a> checkpoint database</dt>
<dd>
<p>By default, <a href="#checkpoint">checkpoints</a> are stored within the <a href="#target">target</a>
however it is possible to configure a separate Redis database for the purposes of storing checkpoints. The primary
use-case for this is to support <a href="#job">jobs</a> that do not use Redis as their target database (e.g. Splunk).</p>
</dd>
<dt class="hdlist1"><a id="claim"></a> claim</dt>
<dd>
<p>Designation of a Redis Connect <a href="#instance">instance&#8217;s</a> sole responsibility for a
<a href="#partition">job partition</a>. See <a href="#job-execution">Job Execution</a> for more details.</p>
</dd>
<dt class="hdlist1"><a id="cluster"></a> cluster</dt>
<dd>
<p>Redis Connect has a cloud-native and shared-nothing cluster architecture which allows any
node/member/<a href="#instance">instance</a>, with a connection to the <a href="#job-management-database">Job Management Database</a>, to operate stand-alone, become the
leader of a clustered deployment, perform <a href="#job-execution">job execution</a>, and/or provide passive high-availability.</p>
</dd>
<dt class="hdlist1"><a id="connector"></a> connector</dt>
<dd>
<p>Dedicated thread(s) instantiated by each <a href="#partition">job partition</a> for the purpose of querying
the <a href="#log">transactional log</a> for batches of new changed-data events which will be stored within its transient in-memory queue.</p>
</dd>
<dt class="hdlist1"><a id="pipeline"></a> data pipeline</dt>
<dd>
<p>Multi-<a href="#stage">stage</a> event-driven workflow that transforms and propagates changed-data events in
the order they were captured at the <a href="#source">source</a>. Each <a href="#partition">partition</a> operates a replica of its own data pipeline in isolation.</p>
</dd>
<dt class="hdlist1"><a id="instance"></a> instance</dt>
<dd>
<p>A single JVM process (a.k.a. cluster node/member) which participates in a Redis Connect <a href="#cluster">cluster</a>.</p>
</dd>
<dt class="hdlist1"><a id="job"></a> job</dt>
<dd>
<p>Unique name to label everything required for end-to-end replication from <a href="#source">source</a> to
<a href="#target">target</a> including each <a href="#partition">partition&#8217;s</a> <a href="#pipeline">data pipeline</a>, configuration, and metadata.</p>
</dd>
<dt class="hdlist1"><a id="claim_stream"></a> Job Claim Assignment Stream</dt>
<dd>
<p>Asynchronous event-messaging broker, implemented with Redis Streams,
between the <a href="#job-reaper">Job Reaper</a> and <a href="#job-claimer">JobClaimer(s)</a> used for the sole purpose of claiming <em>UNASSIGNED</em>
<a href="#partition">job partitions</a> by Redis Connect <a href="#instance">instance(s)</a>.</p>
</dd>
<dt class="hdlist1"><a id="partition"></a> partition</dt>
<dd>
<p>Replica of the <a href="#pipeline">data pipeline</a> which enables linear scalability without losing order.
<a href="#job">Job</a> partitions have no awareness nor direct coordination with each other, therefore can be deployed across one
or multiple Redis Connect <a href="#instance">instance(s)</a>.</p>
</dd>
<dt class="hdlist1"><a id="producer"></a> producer</dt>
<dd>
<p>Dedicated thread instantiated by each <a href="#partition">job partition</a> for the purpose of polling
the <a href="#connector">connector&#8217;s</a> in-memory queue so changed-data events can be published to the <a href="#pipeline">data pipeline</a> in order.</p>
</dd>
<dt class="hdlist1"><a id="quiesce"></a> quiesce</dt>
<dd>
<p>Allowing a <a href="#pipeline">data pipeline</a> to process all queued changed-data events before stopping the
<a href="#partition">job partition</a> upon an unrecoverable error or manual administrative intervention (e.g. stop-job,
migrate-job). The following exceptions will automatically bypass this process to avoid timeouts and deadlocks -
io.lettuce.core.RedisException, InvalidChangeEventException, RedisTransactionFailureException,
RedisWaitCommandTimeoutException, UnrecoverableTargetConnectionException, NullPointerException.</p>
</dd>
<dt class="hdlist1"><a id="stage"></a> stage</dt>
<dd>
<p>Encapsulation of functional logic (i.e. <a href="#target">target</a> <a href="#sink">sink</a>, custom transformation,
detokenization, etc.) as part of a <a href="#pipeline">data pipeline</a>.</p>
</dd>
<dt class="hdlist1"><a id="sink"></a> sink</dt>
<dd>
<p>Pre-built <a href="#stage">stage</a> that uses proprietary client libraries to write data to the <a href="#target">target</a> based on the
selected data structure/model. They can be configured to also update the <a href="#checkpoint">checkpoint</a> within a transactional scope
for Redis target(s).</p>
</dd>
<dt class="hdlist1"><a id="source"></a> source</dt>
<dd>
<p>Data platform, such as PostgreSQL, in which the changed-data events are captured/originate.</p>
</dd>
<dt class="hdlist1"><a id="target"></a> target</dt>
<dd>
<p>Data platform to which changed-data events will be replicated. With Redis Connect, the target
is usually Redis.</p>
</dd>
<dt class="hdlist1"><a id="task"></a> task</dt>
<dd>
<p>represents LOAD job <a href="#partition">partitions</a>. This labeling exists primarily for internal purposes so
can be used synonymously with partitions.</p>
</dd>
<dt class="hdlist1"><a id="log"></a> transactional log</dt>
<dd>
<p>(a.k.a. binary log, change-stream, database log, journal, outbox-table, redo log,
write-ahead log,  etc.) is an ordered record of mutations executed by a DBMS. Each source maintains its own version of
the transaction log&#8217;s schema and offset identifiers. Transaction logs are not always supported in the form of disk-based
files. In some cases, the log will be a change-stream or outbox table. Some sources require proprietary transaction log
miner libraries to read log entries.</p>
</dd>
<dt class="hdlist1"><a id="type"></a> type</dt>
<dd>
<p>The following types are supported: <strong>LOAD</strong>, <strong>STREAM</strong>, and <strong>PARTITIONED_STREAM</strong>.</p>
<div class="ulist">
<ul>
<li>
<p><strong>LOAD</strong> (a.k.a. Initial Load) <a href="#job">jobs</a> directly query <a href="#source">source</a> table(s) at the point-in-time they are started.
Initial loads can be horizontally partitioned for linear scalability, independent of the job&#8217;s PARTITIONED_STREAM
strategy (i.e. LOAD might need 10 partitions while the same job&#8217;s PARTITIONED_STREAM only needs 2). This makes it
feasible to complete the entire initial load within minutes (instead of hours) to comply with a bounded enterprise
release window or recovery-time objective (RTO). Once each <a href="#task">task</a> <a href="#partition">partition</a> completes its part of the initial load,
it will automatically stop and release <a href="#job.claim.max.capacity">capacity</a> back to the Redis Connect <a href="#instance">instance</a>
that <a href="#claim">claimed</a> them. <strong>Disclaimer:</strong> Since each partition will query source table(s) there could be a momentary
impact on routine transactions.</p>
</li>
<li>
<p><strong>STREAM</strong> <a href="#job">jobs</a> replicate changed-data events from the <a href="#source">source&#8217;s</a> proprietary <a href="#log">transactional log</a>.
Unlike LOAD jobs, STREAM jobs only stop in the event of an unrecoverable error or manual administrative intervention.</p>
</li>
<li>
<p><strong>PARTITIONED_STREAM</strong> <a href="#job">jobs</a> represent STREAM jobs that are <a href="#partition">partitioned</a>. This type exists
primarily for internal purposes so can be used synonymously with STREAM.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="source-distributions"><a class="anchor" href="#source-distributions"></a>4. Source Distributions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Redis Connect can run within a container or by downloading the code and running it in your environment.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Download</dt>
<dd>
<p>Releases are distributed on <a href="https://github.com/redis-field-engineering/redis-connect-dist/releases">GitHub</a>.
See the release history for the latest version.</p>
</dd>
<dt class="hdlist1">Docker</dt>
<dd>
<p>You can also run and deploy Redis Connect using the following
<a href="https://hub.docker.com/r/redislabs/redis-connect">Docker Image</a>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Once the distribution archive is downloaded, the following directories will be extracted under <em>/redis-connect</em>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">lib</dt>
<dd>
<p>JARs for Redis Connect and its dependencies.</p>
</dd>
<dt class="hdlist1">extlib</dt>
<dd>
<p>JARs for custom <a href="#stage">stages</a> and database drivers (when necessary such as Oracle and DB2).
All JARs must exist within the directory before deployment.</p>
</dd>
<dt class="hdlist1">config</dt>
<dd>
<p>Sample job configurations, credentials property files, and Grafana dashboard configurations.</p>
</dd>
<dt class="hdlist1">bin</dt>
<dd>
<p>Scripts for running Redis Connect on Linux VMs, containerized environments, and Windows.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported-sources"><a class="anchor" href="#supported-sources"></a>5. Supported Sources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Redis Connect supports seamless integration and continuous data replication with a growing set of heterogeneous
data platforms including RDBMS, NoSQL, IMDG, and more. It can also be used as a one-time migration tool or perform
periodic ETL / batch loads from sources that include delimited (e.g. CSV, TSV, PSV), JSON, and XML files.</p>
</div>
<div class="paragraph">
<p>The table below shows the current list of supported <a href="#source">sources</a>. Each source&#8217;s name links to an end-to-end demo
including a pre-installed source data platform, sample configuration, and data.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Supported source data platforms</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data Platform</th>
<th class="tableblock halign-left valign-top">Supported Job type(s)</th>
<th class="tableblock halign-left valign-top">3rd Party Source Configuration Docs</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/examples/db2">DB2</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/examples/files">Files</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://developer.redis.com/riot/#_files">RIOT docs</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/examples/gemfire">Gemfire</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOAD &amp; STREAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://geode.apache.org/docs/guide/115/about_geode.html">Apache Geode Docs</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/examples/mongodb">MongoDB</a> (Atlas*)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOAD &amp; STREAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://debezium.io/documentation/reference/stable/connectors/mongodb.html">Debezium MongoDB docs</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/examples/mysql">MySQL</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOAD &amp; STREAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://debezium.io/documentation/reference/stable/connectors/mysql.html">Debezium MySQL docs</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/examples/oracle">Oracle</a> (AWS RDS Oracle*)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOAD &amp; STREAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://debezium.io/documentation/reference/stable/connectors/oracle.html">Debezium Oracle docs</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/examples/postgres">PostgreSQL</a> (AWS RDS PostgreSQL*)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOAD &amp; STREAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://debezium.io/documentation/reference/stable/connectors/postgresql.html">Debezium PostgreSQL docs</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/examples/splunk">Splunk</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STREAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.splunk.com/Documentation/SplunkCloud/latest/Data/UseHECusingconffiles">Splunk HEC docs</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/examples/mssql">SQLServer</a> (Azure SQL Database*)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOAD &amp; STREAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://debezium.io/documentation/reference/stable/connectors/sqlserver.html">Debezium SQL Server docs</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/examples/vertica">Vertica</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>* Supported Cloud-Managed Services</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="redis-connect-architecture"><a class="anchor" href="#redis-connect-architecture"></a>6. Redis Connect Architecture</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#distributed-consensus">Distributed Consensus</a></p>
</li>
<li>
<p><a href="#job-execution">Job Execution</a></p>
</li>
<li>
<p><a href="#job-management">Job Management</a></p>
</li>
<li>
<p><a href="#job-management-database">Job Management Database</a></p>
</li>
<li>
<p><a href="#linear-scalability">Linear Scalability</a></p>
</li>
<li>
<p><a href="#high-availability">High Availability</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Redis_Connect_Architecture_Overview"><a class="anchor" href="#Redis_Connect_Architecture_Overview"></a>6.1. Overview</h3>
<div class="paragraph">
<p>Redis Connect has a cloud-native and shared-nothing architecture which allows any <a href="#cluster">cluster</a> node/member/<a href="#instance">instance</a>
to perform both <a href="#job-management">Job Management</a> and <a href="#job-execution">Job Execution</a>. Each Redis Connect instance is multi-threaded and segregates
the control plane (Job Management) from the data plane (Job Execution) so administration does not impact
performance.</p>
</div>
<div class="paragraph">
<p>Redis Connect instances are also multi-tenant and support the collocated execution of <a href="#partition">job partitions</a> with
heterogeneous <a href="#source">sources</a> in isolation, so they don&#8217;t become noisy neighbors. For example, a single instance can
simultaneously process a <a href="#pipeline">data pipeline</a> with Gemfire as its source and another with Oracle as its source.</p>
</div>
<div class="paragraph">
<p>Redis Connect is compiled in JAVA and deploys on a platform-independent JVM which allows it to be agnostic of the
underlying operating system (Linux, Windows, Containers, etc.) It was designed to minimize the use of
infrastructure-resources and avoids complex dependencies on other distributed platforms such as Kafka and ZooKeeper.
In fact, the majority of deployments will only require a single instance to perform both Job Management and Job
Execution, while additional <em>m</em> instance(s) can be optionally deployed for N+<em>m</em> redundancy /
<a href="#high-availability">high-availability</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Redis Connect&#8217;s multi-tenancy allows instances to <a href="#linear-scalability">vertically-scale</a> without the overhead
of requiring additional JVMs per each job partition or distinct source. See <a href="#capacity-estimation">Capacity Estimation</a> for more information.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="distributed-consensus"><a class="anchor" href="#distributed-consensus"></a>6.2. Distributed Consensus</h3>
<div class="paragraph">
<p>Redis Connect was built to execute mission-critical <a href="#pipeline">data pipelines</a> on environments (including cloud) with
potentially unbounded network delays and random failure scenarios. For this reason, it was implemented with a
distributed and shared-nothing architecture which allows any Redis Connect <a href="#instance">instance</a> to perform the function
of <a href="#job-management">Job Management</a> or <a href="#job-execution">Job Execution</a> or both.</p>
</div>
<div class="paragraph">
<p>Redis Connect only allows a single <a href="#instance">instance</a> to act as the <a href="#cluster">cluster</a> leader at any given time. Similarly, only a single
instance can <a href="#claim">claim</a> a <a href="#partition">job partition</a>. The consensus algorithms for these single leader elections are
based on a <a href="https://martin.kleppmann.com/2016/02/08/how-to-do-distributed-locking.html">distributed locking pattern</a> and
<a href="https://en.wikipedia.org/wiki/Heartbeat_(computing)">heartbeat</a> mechanisms.</p>
</div>
<div class="paragraph">
<p>By default, at startup each instance will initiate its candidacy to become the cluster leader and begin to periodically
check for new job claim requests in the <a href="#claim_stream">Job Claim Assignment Stream</a>. If unsuccessful, the instance will continue to periodically
attempt to gain distributed consensus based on the <a href="#cluster.election.attempt.interval">cluster.election.attempt.interval</a>
and <a href="#job.claim.attempt.interval">job.claim.attempt.interval</a>, respectively.</p>
</div>
<div class="paragraph">
<p>Redis Connect allows leadership claims to be renewed <strong>indefinitely</strong> which avoids unnecessary overhead and
context-switching. To avoid deadlocks, claims are implemented as a
<a href="https://en.wikipedia.org/wiki/Lease_(computer_science)">lease</a> with an auto-timeout mechanism via key-expiry (TTL) and a
heartbeat notification for periodic renewal based on the
<a href="#cluster.leader.heartbeat.lease.renewal.ttl">cluster.leader.heartbeat.lease.renewal.ttl</a> and
<a href="#job.claim.heartbeat.lease.renewal.ttl">job.claim.heartbeat.lease.renewal.ttl</a>, respectively. The lease is used as a
barrier to block new elections, and prevent split-brain scenarios, until the leader is no longer available or manually
relinquishes its claim.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The cluster leader will only relinquish its claim due to a process failure, elongated garbage-collection
pause, network delay, etc. However, job ownership claims can be relinquished due to unrecoverable <a href="#pipeline">data pipeline</a> errors
or manual administrative intervention (e.g. stop-job, migrate-job).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="job-execution"><a class="anchor" href="#job-execution"></a>6.3. Job Execution</h3>
<div class="ulist">
<ul>
<li>
<p><a href="#offset-management">Offset Management</a></p>
</li>
<li>
<p><a href="#initial-load">Initial Load</a></p>
</li>
<li>
<p><a href="#delivery-guarantees">Delivery Guarantees</a></p>
</li>
<li>
<p><a href="#job-capacity">Job Capacity</a></p>
</li>
<li>
<p><a href="#custom-stages">Custom Stages</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Job_Execution_Overview"><a class="anchor" href="#Job_Execution_Overview"></a>6.3.1. Overview</h4>
<div class="paragraph">
<p>Each <a href="#partition">job partition</a> is executed, end-to-end, within a single Redis Connect <a href="#instance">instance</a> to reduce network
I/O, context-switching, and garbage-collection pauses. This allows for predictable resource utilization, optimized
performance, and clean failover between Redis Connect instances.</p>
</div>
<div class="paragraph">
<p>Job Execution (data plane) is a multi-threaded orchestration. It begins with a <a href="#connector">connector</a> thread that periodically
queries the <a href="#source">source</a> for batches of changed-data events and stores them within the job partition&#8217;s (transient)
in-memory queue. Concurrently, a <a href="#producer">producer</a> thread periodically polls the in-memory queue, transforms each
changed-data event, and publishes them to the job partition&#8217;s <a href="#pipeline">data pipeline</a> (in time-order).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the connector&#8217;s polling interval is not explicitly set as a custom configuration
(e.g. <a href="#poll.interval.ms">poll.interval.ms</a>), it will use the producer&#8217;s <a href="#pollSourceInterval">pollSourceInterval</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The data pipeline is implemented using a specialized engine, <a href="https://lmax-exchange.github.io/disruptor/">LMAX Disruptor</a>,
which was built to maximize concurrency/throughput and minimize garbage-collection/overhead. Since the data pipeline is
an event-driven workflow, each <a href="#stage">stage</a> can benefit from its own dedicated thread/vCore. See <a href="#production-readiness">Production Readiness</a>
for more information on <a href="#capacity-estimation">capacity estimation</a>.</p>
</div>
<div class="paragraph">
<p>Back-pressure support and circuit-breakers are implemented at every level to avoid OOM failures and noisy neighbors.
For example, if there is a slow consumer or a large unexpected spike of changes, the producer thread will bypass its
polling interval until the data pipeline has enough capacity to enqueue the next batch. The same is true at the
connector level.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Back pressure support is a last resort mechanism which will log all occurrences of its use. If
warnings often show up in your logs, then it is a sign of an imbalance between source and <a href="#target">target</a> throughput.
If it persists, see <a href="#production-readiness">Production Readiness</a> about tuning options and job partitioning.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Data pipelines only require a single <a href="#sink">sink</a> stage, however, additional user-defined stages can be added
to handle proprietary business logic, custom transformations, specialized detokenization, etc. See <a href="#custom-stages">Custom Stages</a>
for more information.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, Job Execution is enabled on every Redis Connect instance however can be disabled via
<a href="#job.claim.service.enabled">job.claim.service.enabled</a>. Disabling Job Execution does not prevent it from performing
<a href="#job-management">Job Management</a> capabilities including acting as a REST/CLI endpoint.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Redis Connect instances are stateless. All data streamed through its data pipelines is
considered <em><a href="https://en.wikipedia.org/wiki/Data_in_transit">data in transit</a> / data in motion / data in-flight</em>
which alleviates typical security concerns.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="offset-management"><a class="anchor" href="#offset-management"></a>6.3.2. Offset Management</h4>
<div class="paragraph">
<p>Most <a href="#source">sources</a> persist committed changed-data events into a proprietary <a href="#log">transactional log</a> via change data capture (CDC)
processes. Each changed-data event within the log is marked with one or more position-markers to uniquely identify its
offset. Within Redis Connect, specialized <a href="#connector">connectors</a> embed libraries to traverse and identify theses
position-maker(s).</p>
</div>
<div class="paragraph">
<p>Offset management is critical to maintain pipeline continuity, order, <a href="#delivery-guarantees">delivery-guarantees</a>, and
resiliency in the event of an error during <a href="#job-execution">job execution</a> or startup from a specific row within the
transaction log. Central to offset management are <a href="#checkpoint">checkpoints</a> which are a composition of offset-related
fields for the purpose of uniquely identifying an exact row in the transaction log. Upon each iteration of the
<a href="#pipeline">data pipeline</a>, the <a href="#sink">sink</a> <a href="#stage">stage</a> with <a href="#checkpointStageIndicator">checkpointStageIndicator</a> enabled, will commit
the changed-data event&#8217;s checkpoint to the <a href="#target">target</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A <a href="#checkpoint_database">checkpoint database</a> can be configured if the target is not chosen as its offset store.
Checkpoints are never committed to the <a href="#job-management-database">Job Management Database</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By enabling <a href="#checkpointTransactionsEnabled">checkpointTransactionsEnabled</a>, the checkpoint will be
committed before the changed-data event to the <a href="#target">target</a> within a transactional scope. This strengthens delivery
guarantees and improves performance by avoiding an additional network hop for iteration of the data pipeline.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Enabling checkpointTransactionsEnabled will create 16384 checkpoint keys (one for each slot) within the target
for <strong>each job partition</strong>. With ~250 bytes per checkpoint, each partitionâ€™s estimated overhead is ~4MB in addition to a
lightweight index to track and query the last committed. When disabled, there is only a single checkpoint key per job
partition.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once a Redis Connect <a href="#instance">instance</a> has <a href="#claim">claimed</a> responsibility for <a href="#job-execution">job execution</a>, it must
determine the offset from which to begin querying changed-data events. If no checkpoint yet exists, most connectors
will begin from the beginning of the transaction log. For edge cases, see <a href="#initial-load">Initial Load</a> on how to set the latest
checkpoint manually.</p>
</div>
</div>
<div class="sect3">
<h4 id="initial-load"><a class="anchor" href="#initial-load"></a>6.3.3. Initial Load</h4>
<div class="paragraph">
<p><a href="#type">LOAD</a> <a href="#job">job</a> type (a.k.a. Initial Load) directly queries the <a href="#source">source&#8217;s</a> table(s) at the point-in-time
it is started via the <strong>POST</strong> /connect/api/v1/job/transition/start/{jobName}/LOAD REST API or CLI command.</p>
</div>
<div class="paragraph">
<p>Initial loads can be horizontally partitioned into <a href="#task">tasks</a> for linear scalability simply by configuring
<a href="#intial_load_partitions">LOAD partitions</a>. Tasks are the equivalent to <a href="#type">PARTITIONED_STREAM</a>
<a href="#partition">job partitions</a> in most ways including how they transform changed-data events and execution of their
<a href="#pipeline">data pipeline</a>. However, a key distinction is that after their workload is <strong>COMPLETE</strong>, tasks automatically release
<a href="#job-capacity">capacity</a> back to the Redis Connect <a href="#instance">instance(s)</a> that <a href="#claim">claimed</a> them.</p>
</div>
<div class="paragraph">
<p>Initial load tasks can be configured independent of <a href="#stream_partitions">PARTITIONED_STREAM partitions</a> for the same
job. For example, an initial load might require 10 tasks to replicate a table with millions of rows within 10-20 minutes
however only require 2 job partitions to handle 15k op/s during event-streaming. Furthermore, since jobs can include
many tables and each table will have its own row count, initial load partitioning can be independently configured at the
<strong>table</strong> level.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Since multiple tasks will query the same source table, there could be a momentary impact on routine transactions.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By partitioning the initial load, administrators have control over its duration (i.e. minutes instead of hours)
which allows for compliance with bounded enterprise release windows and tight recovery-time objectives (RTO). It also
allows for initial loads to run on different infrastructure from long-running stream jobs for cost optimization.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Linear scalability requires adequate resources for parallelization. Since each task requires the equivalent
resources to a job partition, the same <a href="#capacity-estimation">capacity estimation</a> applies for maximum performance.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are effectively two scenarios for performing initial load before starting event-streaming:</p>
</div>
<div class="paragraph">
<p><strong>Job is supported by a dedicated CDC process</strong><br>
In this scenario, the initial load should start in coordination with enabling the CDC process so changed-data events
will begin to be captured at the exact same time. Once the initial load is complete, the job can be started which would
replicate all changed-data events in the order they were captured from the beginning of the transaction log.</p>
</div>
<div class="paragraph">
<p><strong>Job is supported by a shared CDC process</strong><br>
In this scenario, the CDC process was already started for other means and therefore the transaction log is full of
changed-data events that predate the initial load. To avoid overriding data, and unnecessarily increasing lag, before
reaching consistency (potentially by hours), you will need to set the latest checkpoint manually.</p>
</div>
<div class="paragraph">
<p>Redis Connect supports an administrative capability dedicated for this purpose. First, we recommend that you capture the
checkpoint schema specific to your job&#8217;s source in a development environment by using the <strong>GET</strong>
/connect/api/v1/job/checkpoint/{jobId} REST API/CLI. Next, you will need to query the source to identify the offset
which occurred at the time you started the initial load. Copy the offset position marker(s) into the checkpoint schema
and pass it as a parameter to the <strong>POST</strong> /connect/api/v1/job/checkpoint/{jobId} REST API/CLI before starting the job.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The checkpoint schema of each source will be the same across all environments. Querying the source to identify
an offset at a specific point-in-time might require the assistance of your DBA.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="delivery-guarantees"><a class="anchor" href="#delivery-guarantees"></a>6.3.4. Delivery Guarantees</h4>
<div class="sect4">
<h5 id="no_data_loss"><a class="anchor" href="#no_data_loss"></a>No Data Loss</h5>
<div class="paragraph">
<p>Avoiding data loss is a <strong>shared responsibility</strong>. Redis Connect&#8217;s <a href="#offset-management">offset management</a> and stateless
nature, prevents it from losing data as long as the <a href="#source">source</a> <a href="#log">transactional log</a> is available and includes the offsets stored
within the last committed <a href="#checkpoint">checkpoint</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Most 24/7 production environments are at low risk of losing data. However, in non-production environments it is possible
that no changed-data events are created over an extended period of time meanwhile a routine process truncates the
transaction log. In this scenario, Redis Connect would be prevented from matching the offset during a recovery, or restart,
which can lead to data loss if the transaction log cannot be recovered.</p>
</div>
<div class="paragraph">
<p>If this scenario is possible in your production environment, see <a href="#production-readiness">Production Readiness</a> on best practices and
capabilities to avoid data loss.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="at-least-once"><a class="anchor" href="#at-least-once"></a><a id="at_least_once"></a> at-least-once</h5>
<div class="paragraph">
<p>By default, Redis Connect <a href="#job">jobs</a> provide an <em>at-least-once</em> end-to-end delivery guarantee. This means that
in the event of an unrecoverable error, a <strong>single</strong> changed-data event might be replicated again upon recovery /
restart. In non-failure scenarios, events will always be replicated <em>exactly-once</em>.</p>
</div>
</div>
<div class="sect4">
<h5 id="exactly-once"><a class="anchor" href="#exactly-once"></a><a id="exactly_once"></a> exactly-once</h5>
<div class="paragraph">
<p>Redis Connect jobs can be configured to make every effort for <em>exactly-once</em> delivery even if an unrecoverable error
was to occur. By enabling <a href="#checkpointTransactionsEnabled">checkpointTransactionsEnabled</a>, the checkpoint will be
committed before the changed-data event to the <a href="#target">target</a> within a transactional scope. If an unrecoverable error were
to occur in the middle of that transaction, Redis Connect would seamlessly
<a href="https://en.wikipedia.org/wiki/Rollback_(data_management)">rollback</a> the last committed checkpoint to its previous state.
This would effectively result in the target having the exact overall same state as it had before the transaction began.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When Redis is the target, rollback is also supported to handle replication issues between the primary and backup
shards by enabling <a href="#redis.wait.enabled">redis.wait.enabled</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="job-capacity"><a class="anchor" href="#job-capacity"></a>6.3.5. Job Capacity</h4>
<div class="paragraph">
<p>Redis Connect <a href="#instance">instances</a> are multi-tenant and multi-threaded which comes with the many advantages described
in <a href="#Redis_Connect_Architecture_Overview">Architecture Overview</a>, however, it is not without risks. One of the
major concerns is around resource utilization.</p>
</div>
<div class="paragraph">
<p>Resource utilization is important to maintain performance SLAs, avoidance of noisy neighbors, and unexpected crashes.
For example, if a Redis Connect instance was deployed on server with only 4 vCores and <a href="#claim">claimed</a> 4
<a href="#partition">job partitions</a>, there would be a risk of timeouts due to context switching and resource starvation.
See <a href="#capacity-estimation">Capacity Estimation</a> for more details.</p>
</div>
<div class="paragraph">
<p>For this reason, Redis Connect supports a maximum limit to the amount of job partitions (inclusive of initial load
<a href="#task">tasks</a>) that can be concurrently claimed by a single instance via the <a href="#job.claim.max.capacity">job.claim.max.capacity</a>
configuration. This limit acts as a control which prevents the <a href="#job-claimer">Job Claimer</a> service from over-provisioning and is
used as part of capacity validation during transitions (e.g. start-job, migrate-job). For example, if all nodes are at
full capacity both start-job and migrate-job transitions could not be scheduled until capacity was either added to the
cluster or released by one of the nodes.</p>
</div>
<div class="listingblock">
<div class="title">Example Logging</div>
<div class="content">
<pre>17:10:45.059 [JOB_MANAGER_THREADPOOL-1] INFO redis-connect-manager - Instance: 2468@Allen has 9 remaining capacity to claim job(s) from its 10 max allowable capacity</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Each instance can configure its own limit. The limit cannot be changed without restarting the JVM process.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Additionally, there is a control at the job-level which limits the maximum partitions associated to the same job that can
be claimed by a single instance. For example, due to a limitation of the Gemfire client library, a single instance can
only claim a single job partition with Gemfire as its source even if it has excess capacity at the member-level. To
achieve this, <a href="#maxPartitionsPerClusterMember">maxPartitionsPerClusterMember</a> must be set to 1.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Using maxPartitionsPerClusterMember has implications on <a href="#high-availability">high availability</a> and transitions
(e.g. start-job, migrate-job).
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="custom-stages"><a class="anchor" href="#custom-stages"></a>6.3.6. Custom Stages</h4>
<div class="paragraph">
<p>Redis Connect supports user-defined <a href="#stage">stages</a> which can be implemented in JAVA simply by extending
BaseCustomStageHandler and ChangeEventHandlerFactory. Typical use-cases for stages include advanced/proprietary
transformations, de-tokenization, callback method invocation, and other forms of enrichment.</p>
</div>
<div class="paragraph">
<p>Detailed instructions and examples on how to implement custom stages can be found here -
<a href="https://github.com/redis-field-engineering/redis-connect-custom-stage-sample" class="bare">https://github.com/redis-field-engineering/redis-connect-custom-stage-sample</a></p>
</div>
<div class="listingblock">
<div class="title">Example Custom Stage</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">TransformJsonClobStage</span> <span class="directive">extends</span> BaseCustomStageHandler {

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();
    <span class="directive">private</span> <span class="predefined-type">String</span> jsonClobColumnName;

    <span class="directive">public</span> TransformJsonClobStage(<span class="predefined-type">String</span> jobId, <span class="predefined-type">String</span> jobType, JobPipelineStageDTO stage) {
        <span class="local-variable">super</span>(jobId, jobType, jobPipelineStage);
        <span class="local-variable">this</span>.jsonClobColumnName = <span class="string"><span class="delimiter">&quot;</span><span class="content">JSON_DATA</span><span class="delimiter">&quot;</span></span>; <span class="comment">// Can be configured through an ENV variable</span>
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> onEvent(ChangeEventDTO&lt;<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;&gt; changeEvent) <span class="directive">throws</span> <span class="exception">Exception</span> {

        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; values = changeEvent.getValues();
        <span class="keyword">if</span> (values != <span class="predefined-constant">null</span> &amp;&amp; values.containsKey(jsonClobColumnName)) {

            JsonNode jsonNode = mapper.readTree((<span class="predefined-type">String</span>) values.get(jsonClobColumnName));

            jsonNode.fieldNames().forEachRemaining(key -&gt; {
                values.put(key, jsonNode.get(key));
            });

            values.remove(jsonClobColumnName);
        }
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> init() {
        setSequenceCallback(<span class="keyword">new</span> <span class="predefined-type">Sequence</span>());
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> shutdown() {}

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Custom Stage Factory</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CustomChangeEventHandlerFactory</span> <span class="directive">implements</span> ChangeEventHandlerFactory {

    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> instanceId = <span class="predefined-type">ManagementFactory</span>.getRuntimeMXBean().getName();

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> TYPE_TRANSFORM_JSON_CLOB_CUSTOM_STAGE = <span class="string"><span class="delimiter">&quot;</span><span class="content">TRANSFORM_JSON_CLOB</span><span class="delimiter">&quot;</span></span>;

    <span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">Set</span>&lt;<span class="predefined-type">String</span>&gt; supportedChangeEventHandlers = <span class="keyword">new</span> <span class="predefined-type">HashSet</span>&lt;&gt;();
    <span class="directive">static</span> {
        supportedChangeEventHandlers.add(TYPE_TRANSFORM_JSON_CLOB_CUSTOM_STAGE);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ChangeEventHandler getInstance(<span class="predefined-type">String</span> jobId, <span class="predefined-type">String</span> jobType,
                                          JobPipelineStageDTO stage) <span class="directive">throws</span> <span class="exception">Exception</span>  {

        ChangeEventHandler changeEventHandler;

        <span class="keyword">switch</span> (jobPipelineStage.getStageName()) {
            <span class="keyword">case</span> TYPE_TRANSFORM_JSON_CLOB_CUSTOM_STAGE: changeEventHandler =
                        <span class="keyword">new</span> TransformJsonClobStage(jobId, jobType, jobPipelineStage);
                <span class="keyword">break</span>;
            <span class="keyword">default</span>: {
                <span class="keyword">throw</span> <span class="keyword">new</span> ValidationException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Instance: </span><span class="delimiter">&quot;</span></span> + instanceId +  <span class="string"><span class="delimiter">&quot;</span><span class="content"> failed to load
                            change event handler for JobId: </span><span class="delimiter">&quot;</span></span> + jobId + <span class="string"><span class="delimiter">&quot;</span><span class="content"> due to an invalid
                            Stage: </span><span class="delimiter">&quot;</span></span> + jobPipelineStage.getStageName());
            }
        }

        <span class="keyword">return</span> changeEventHandler;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getType() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">CUSTOM</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> contains(<span class="predefined-type">String</span> stageName) {
        <span class="keyword">return</span> supportedChangeEventHandlers.contains(stageName);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Custom Stage Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">partitions</span><span class="delimiter">&quot;</span></span> : <span class="integer">1</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">pipeline</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">stages</span><span class="delimiter">&quot;</span></span> : [
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">index</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">stageName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">TRANSFORM_JSON_CLOB</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">userDefinedType</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">CUSTOM</span><span class="delimiter">&quot;</span></span>
      },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">index</span><span class="delimiter">&quot;</span></span> : <span class="integer">2</span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">stageName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">REDIS_JSON_SINK</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">checkpointStageIndicator</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">database</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">credentialsDirectoryPath</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">/usr/creds</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">credentialsRotationEventListenerEnabled</span><span class="delimiter">&quot;</span></span> : <span class="value">true</span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">databaseURL</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">redis://12.345.67.89:10000</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">databaseType</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">REDIS</span><span class="delimiter">&quot;</span></span>
        }
      }
    ]
  },</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="job-management"><a class="anchor" href="#job-management"></a>6.4. Job Management</h3>
<div class="sect3">
<h4 id="Job_Management_Overview"><a class="anchor" href="#Job_Management_Overview"></a>6.4.1. Overview</h4>
<div class="ulist">
<ul>
<li>
<p><a href="#job-claimer">Job Claimer</a></p>
</li>
<li>
<p><a href="#job-reaper">Job Reaper</a></p>
</li>
<li>
<p><a href="#job-manager">Job Manager</a></p>
</li>
<li>
<p><a href="#job-orchestrator">Job Orchestrator</a></p>
</li>
<li>
<p><a href="#metrics-reporter">Metrics Reporter</a></p>
</li>
<li>
<p><a href="#rest-api-swagger-ui">REST API &amp; SWAGGER UI</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Job Management (control plane) is an orchestration between multiple services, each handling a distinct operational concern,
that manage the Redis Connect <a href="#cluster">cluster</a> and provision <a href="#job">jobs</a> for <a href="#job-execution">execution</a>. Job Management
services include the <a href="#job-claimer">Job Claimer</a>, <a href="#job-reaper">Job Reaper</a>, <a href="#job-manager">Job Manager</a>, <a href="#metrics-reporter">Metrics Reporter</a>, <a href="#job-orchestrator">Job Orchestrator</a>, and
hosting the REST API, SWAGGER UI, &amp; CLI.</p>
</div>
<div class="paragraph">
<p>While Job Management is entirely data-driven, Redis Connect <a href="#instance">instances</a> are stateless. This is due to
Redis Connect&#8217;s required dependency on the <a href="#job-management-database">Job Management Database</a> for its metadata including configurations,
<a href="#claim">claims</a>, heartbeat leases, metrics, transition logs, etc.</p>
</div>
<div class="paragraph">
<p>Since Redis Connect instances are stateless, they can fail without risking <a href="#no_data_loss">data loss</a> and time-order
of events. As long as another <a href="#cluster">cluster</a> member/node has <a href="#job-capacity">capacity</a>, or the original instance can
be recovered, each lost <a href="#partition">job partition</a> will quickly pick up from its last recorded <a href="#checkpoint">checkpoint</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, Job Management is enabled on every Redis Connect instance however can be disabled via
<a href="#job.manager.services.enabled">job.manager.services.enabled</a>. Disabling Job Execution does not prevent an instance
from performing Job Management capabilities including acting as a REST API, SWAGGER UI, &amp; CLI endpoint.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="job-claimer"><a class="anchor" href="#job-claimer"></a>6.4.2. Job Claimer</h4>
<div class="paragraph">
<p>Each Redis Connect <a href="#instance">instance</a>, with <a href="#job-management">Job Management</a> enabled, schedules a thread to run the Job Claimer service.
Job Claimers are responsible for claiming <em>UNASSIGNED</em> <a href="#partition">job partitions</a> which were published to the
<a href="#claim_stream">Job Claim Assignment Stream</a>. At startup, each Job Claimer subscribes as a consumer to the Job Assignment Claim Stream&#8217;s Consumer Group.</p>
</div>
<div class="paragraph">
<p>Redis Connect instances are in a constant race-condition (see <a href="#distributed-consensus">Distributed Consensus</a> for more details) as each
Job Claimer periodically attempts to be the first to consume from the Job Claim Assignment Stream in order to
claim a job partition. For efficient resource utilization, the <a href="#job.claim.max.capacity">job.claim.max.capacity</a> and
<a href="#job.claim.batch.size.per.attempt">job.claim.batch.size.per.attempt</a> configurations can be used to prevent
over-provisioning until existing claim <a href="#job-capacity">capacity</a> is relinquished.</p>
</div>
<div class="paragraph">
<p>Upon successful claim, the job partition&#8217;s ownership designation is updated within the <a href="#job-management-database">Job Management Database</a>
and a heartbeat notification is initiated. The claim&#8217;s lease is periodically refreshed to avoid having the
<a href="#job-reaper">Job Reaper</a> service change the ownership designation back to <em>UNASSIGNED</em> and subsequently add the job partition back
onto the Job Claim Assignment Stream.</p>
</div>
<div class="paragraph">
<p>By using Redis Streams Consumer Groups, Redis Connect assurances that only a single consumer can consume a message from
the stream. Once the message is consumed, it is added to a Pending Entries List (PEL) within the Redis Streams
Consumer Group and only removed once ACKnowledged by its consumer. If a failure was to occur before the
<a href="https://redis.io/commands/xack/">XACK</a>, there is recovery logic built into the Job Claimer to avoid a deadlock.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, <a href="#job-execution">Job Execution</a> is enabled on every Redis Connect instance however can be disabled via
<a href="#job.claim.service.enabled">job.claim.service.enabled</a>. Disabling Job Execution does not prevent an instance
from performing <a href="#job-management">Job Management</a> capabilities including acting as a REST API, SWAGGER UI, &amp; CLI endpoint.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="job-reaper"><a class="anchor" href="#job-reaper"></a>6.4.3. Job Reaper</h4>
<div class="paragraph">
<p>Each Redis Connect <a href="#instance">instance</a>, with  <a href="#job-management">Job Management</a> enabled, schedules a thread to run the Job Reaper service
based on <a href="#job.reap.attempt.interval">job.reap.attempt.interval</a>, however, only the <a href="#cluster">cluster</a> leader is allowed to
perform its core function. In other words, there will only ever be one Job Reaper actively performing its service
across the entire cluster.</p>
</div>
<div class="paragraph">
<p>The Job Reaper is a watchdog service which identifies <a href="#partition">job partitions</a> with expired heartbeat leases for
the purpose of changing their ownership designation to <em>UNASSIGNED</em> and subsequently publishing new <a href="#claim">claim</a> requests
to the <a href="#claim_stream">Job Claim Assignment Stream</a>. It also takes part in an orchestrated resource cleanup to handle
<a href="#network-partition">network partition</a> failure scenarios.</p>
</div>
</div>
<div class="sect3">
<h4 id="job-manager"><a class="anchor" href="#job-manager"></a>6.4.4. Job Manager</h4>
<div class="paragraph">
<p>Each Redis Connect <a href="#instance">instance</a>, with <a href="#job-management">Job Management</a> enabled, schedules a thread to run its Job Manager service
which facilitates its candidacy for <a href="#cluster">cluster</a> leadership. See <a href="#distributed-consensus">Distributed Consensus</a> for more details.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To avoid a deadlock scenario with single member clusters, if the cluster leader&#8217;s heartbeat expires however the
Redis Connect <a href="#instance">instance</a> remains alive, this now former cluster leader will not be blocked from attempting to become
reelected.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="job-orchestrator"><a class="anchor" href="#job-orchestrator"></a>6.4.5. Job Orchestrator</h4>
<div class="paragraph">
<p>Each Redis Connect <a href="#instance">instance</a>, with <a href="#job-management">Job Management</a> enabled, can support all administrative operations via the REST
API, SWAGGER UI, or CLI. These operations all flow through the Job Orchestrator which has its own connection to the
<a href="#job-management-database">Job Management Database</a> and equally performs validations regardless of the channel used to initiate the command.</p>
</div>
<div class="paragraph">
<p>Since Redis Connect has a shared-nothing architecture, administrative operations can be issued from any Redis Connect
instance. However, the one caveat is for Log Level operations which only impact the Redis Connect instance that
initiated the REST API, SWAGGER UI, or CLI endpoint command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It&#8217;s typical that Redis Connect instances which are configured to operate the CLI are used as administration-only
<a href="#cluster">cluster</a> members with <a href="#job.claim.service.enabled">job.claim.service.enabled</a> disabled. This is so they can be spun
up and removed without unnecessarily impacting <a href="#job-execution">Job Execution</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="metrics-reporter"><a class="anchor" href="#metrics-reporter"></a>6.4.6. Metrics Reporter</h4>
<div class="paragraph">
<p>Each Redis Connect <a href="#instance">instance</a>, with <a href="#job-execution">Job Execution</a> and cluster-metrics enabled, schedules a thread to run the
Metrics Reporter service. Its function is to periodically record the collected metrics from across all <a href="#claim">claimed</a>
<a href="#partition">job partitions</a> with metrics enabled.</p>
</div>
<div class="paragraph">
<p>There are currently two versions of metrics reporting supported : RedisTimeSeries and OpenTelemetry. {Add more detail once JB is done</p>
</div>
</div>
<div class="sect3">
<h4 id="rest-api-swagger-ui"><a class="anchor" href="#rest-api-swagger-ui"></a>6.4.7. REST API &amp; SWAGGER UI</h4>
<div class="paragraph">
<p>Each Redis Connect <a href="#instance">instance</a>, with <a href="#rest.api.enabled">rest.api.enabled</a> enabled, exposes a REST API and a
<a href="https://swagger.io/tools/swagger-ui/">SWAGGER UI</a> for ease of use. By default, the REST API uses port 8282, however, it&#8217;s
configurable via <a href="#rest.api.port">rest.api.port</a> and must be unique if multiple Redis Connect instances are deployed on
the same host.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When the SWAGGER UI is exposed on an open port in the firewall, it&#8217;s a best practice not to use the default port.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example REST API CURL command</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -X GET &quot;http://localhost:8282/connect/api/v1/job/checkpoint/%7Bconnect%7D%3Ajob%3Acdc-job&quot; -H  &quot;accept: */*&quot;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example REST API Request URL</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">http://localhost:8282/connect/api/v1/job/checkpoint/%7Bconnect%7D%3Ajob%3Acdc-job</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example REST API Response Body</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json lines">{
  &quot;connect:timestamp&quot; : &quot;1698095512324&quot;,
  &quot;src:tx:seq&quot; : &quot;999&quot;,
  &quot;connect:name&quot; : &quot;connect:cp:cdc-job:{14698}&quot;,
  &quot;src:tx:time&quot; : &quot;1698095450560&quot;,
  &quot;lsn&quot; : &quot;23672320&quot;,
  &quot;txId&quot; : &quot;500&quot;,
  &quot;ts_usec&quot; : &quot;1698095450560554&quot;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST API commands are categorized into 3 domains - Cluster Management, Job Management, and Log Management. All
<a href="#job-management">Job Management</a> administration can be controlled via REST API.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Administrators should <strong>never</strong> directly manipulate metadata within the <a href="#job-management-database">Job Management Database</a> without using
either the <a href="#cli">CLI</a> or <a href="#rest-api-swagger-ui">REST API &amp; SWAGGER UI</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For ease of use, and as a form of API catalogue, Redis Connect supports a SWAGGER UI that can be accessed on the
localhost and port of each REST API enabled instance via <a href="http://localhost:8283/swagger-ui/index.html#/" class="bare">http://localhost:8283/swagger-ui/index.html#/</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/swagger_main.png" alt="swagger main">
</div>
</div>
<div class="paragraph">
<p>Each API is self-documented and versioned with Redis Connect releases therefore can be considered a single source of
truth.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/start_job_api.png" alt="start job api">
</div>
</div>
<div class="paragraph">
<p>As reference-only, here are the following supported APIs as of Redis Connect v0.10.5:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cluster_management_apis.png" alt="cluster management apis">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/job_management_apis.png" alt="job management apis">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/log_management_apis.png" alt="log management apis">
</div>
</div>
<div class="paragraph">
<p>To access the SWAGGER UI when a Redis Connect <a href="#cluster">cluster</a> is not active OR exposing an open port in the firewall is
blocked by security protocols, a reference-only version can be accessed remotely via
<a href="https://redis-field-engineering.github.io/redis-connect-api-docs/" class="bare">https://redis-field-engineering.github.io/redis-connect-api-docs/</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Even when CURL is used to initiate administrative commands, it is often useful to leverage the SWAGGER UI to
construct the Request URL.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="cli"><a class="anchor" href="#cli"></a>6.5. CLI</h3>
<div class="paragraph">
<p>Redis Connect has a shared-nothing <a href="#Redis_Connect_Architecture_Overview">architecture</a> therefore any <a href="#cluster">cluster</a>
<a href="#instance">instance/member/node</a> can be configured to expose a command line interface (CLI).</p>
</div>
<div class="paragraph">
<p>Similar to the <a href="#rest-api-swagger-ui">REST API &amp; SWAGGER UI</a>, the CLI exposes all administrative commands for the purpose of <a href="#job-management">Job Management</a>.
These commands are categorized into 3 domains - Cluster Management, Job Management, and Log Management.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Administrators should <strong>never</strong> directly manipulate metadata within the <a href="#job-management-database">Job Management Database</a> without using
either the <a href="#cli">CLI</a> or <a href="#rest-api-swagger-ui">REST API &amp; SWAGGER UI</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To begin a CLI prompt, you can simply start a Redis Connect instance with the following parameter:</p>
</div>
<div class="listingblock">
<div class="title">Example Start CLI</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./bin/redisconnect.sh cli

redis-connect-cli&gt; |</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example List Command Domains</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">redis-connect-cli&gt; help
 -  PicocliCommands registry
Summary: clear   Clears the screen
         cls     Clears the screen
         cluster
         exit
         job
         log</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example List Cluster Commands</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">redis-connect-cli&gt; cluster -help
Usage:  cluster [-hV] [COMMAND]
  -h, --help      Show this help message and exit.
  -V, --version   Print version information and exit.
Commands:
  delete_cluster_member_config
  delete_inactive_job_assignment_queue_consumers
  delete_job_management_db_metadata
  get_cluster_job_claims
  get_cluster_leader
  get_cluster_member_config
  get_all_cluster_member_configs
  get_cluster_member_remaining_capacity
  get_cluster_remaining_capacity
  get_job_claim_transitions_log
  get_task_claim_transitions_log</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a visual guide on using the CLI, check out this quick start <a href="https://asciinema.org/a/492521">video</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since CLIs are short-running processes, it&#8217;s a best practice to disable both <a href="#job-execution">Job Execution</a> and
<a href="#job-management">Job Management</a> on the Redis Connect instance used to deploy it.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="job-management-database"><a class="anchor" href="#job-management-database"></a>6.6. Job Management Database</h3>
<div class="paragraph">
<p>Redis Connect&#8217;s <a href="#job-management">Job Management</a> is entirely data-driven however Redis Connect <a href="#instance">instances</a> are stateless.
For this reason, Redis Connect has a required dependency on Redis Enterprise as the primary database for its
metadata including <a href="#job">job</a> configurations, <a href="#claim">claims</a>, heartbeat leases, metrics, job lifecycle logs, etc.</p>
</div>
<div class="paragraph">
<p>Since metadata availability is a single-point of failure to Redis Connect&#8217;s operation, it&#8217;s critical to properly
configure Redis Enterprise&#8217;s advanced operational capabilities including high-availability, persistence, and
<a href="#security">security</a>. See <a href="#production-readiness">Production Readiness</a> for more details.</p>
</div>
<div class="paragraph">
<p>Furthermore, Redis' inherent single-threaded properties and unique commands are foundational to the
<a href="#distributed-consensus">distributed consensus</a> algorithms which dictate <a href="#cluster">cluster</a> leader election and job claims.
Redis Enterprise&#8217;s data structures/models are even used for the <a href="#claim_stream">Job Claim Assignment Stream</a>, powered by
<a href="https://redis.io/docs/data-types/streams/">Redis Streams</a>, and the default <a href="#metrics-reporter">Metrics Reporter</a> powered by
<a href="https://redis.io/docs/data-types/timeseries/">Redis TimeSeries</a>.</p>
</div>
<div class="paragraph">
<p>ALL Redis Connect metadata shares a {connect} namespace to ensure that keys are collocated on the same Redis hashslot.
This ensures that administrative processes update metadata within Redis transactions to avoid consistency issues.
It also provides a simple way to identify Redis Connect metadata when collocated with <a href="#target">target</a> Redis database keys
in development environments.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Production environments (or any with &gt;100k keys) should use a separate database for Redis Connect metadata to
avoid painfully long <a href="#high-availability">high availability</a> recoveries due the use of the Redis SCAN command.
See <a href="#production-readiness">Production Readiness</a> for more details.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>While ALL Redis Connect metadata is available via both <a href="#cli">CLI</a> and <a href="#rest-api-swagger-ui">REST API &amp; SWAGGER UI</a>, the easiest way to
visualize it is with <a href="https://redis.com/redis-enterprise/redis-insight/">Redis Insight</a>. Here is an example:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/redis_connect_metadata.png" alt="redis connect metadata">
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Administrators should <strong>never</strong> directly manipulate metadata within the <a href="#job-management-database">Job Management Database</a> without using
either the Redis Connect <a href="#cli">CLI</a> or <a href="#rest-api-swagger-ui">REST API &amp; SWAGGER UI</a>. See <a href="#job-management-database-acls">Job Management Database ACLs</a> for more information.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="linear-scalability"><a class="anchor" href="#linear-scalability"></a>6.7. Linear Scalability</h3>
<div class="paragraph">
<p>Redis Connect <a href="#job">jobs</a> can be <a href="#partition">partitioned</a> for linear scalability. Partitioning allows for increased
throughput without impact on end-to-end latency and has minimal overhead on resource utilization. Linear scalability
through partitioning is applicable to both <a href="#type">LOAD</a> and <a href="#type">PARTITIONED_STREAM</a> job types.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="#initial-load">Initial Load</a> can and should be scaled independently of streaming jobs for cost optimization. In fact, it might
prove cost-efficient to perform initial load on temporary separate infrastructure to avoid over-provisioing for a
one-time task.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Redis Connect supports both vertical and horizontal scalability through its support of multi-tenancy. In the same way,
job partitions can be <a href="#claim">claimed</a> and <a href="#job-execution">executed</a> by many Redis Connect <a href="#instance">instances</a>
so too can a single instance claim them all on its own. As long as the <a href="#cluster">cluster</a> adheres to proper
<a href="#capacity-estimation">capacity estimation</a>, there will be no difference in performance.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Vertical scalability is recommended to reduce the resource overhead for cluster management and administration.
For example, assuming infrastructure allows for it, it would be less overhead to allow a single Redis Connect instance to
claim 5 partitions then it would be to maintain a cluster of 5 Redis Connect instances with each claiming a single
partition.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Redis Connect routes changed-data events based on a hashing policy applied on the <a href="#source">source</a> primary key. This
guarantees only a single partition will ever publish a changed-data event to its <a href="#pipeline">data pipeline</a> which eliminates
duplication and maintains strict order at the key-level.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
While scalability should not be confused with separating tables into different jobs, decisions about which
tables to configure within a single job should be considered with respects to their individual scale requirements.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="high-availability"><a class="anchor" href="#high-availability"></a>6.8. High Availability</h3>
<div class="ulist">
<ul>
<li>
<p><a href="#redis-connect-instance-failure">Redis Connect Instance Failure</a></p>
</li>
<li>
<p><a href="#virtual-machine-cloud-instance-failure">Virtual Machine / Cloud Instance Failure</a></p>
</li>
<li>
<p><a href="#network-partition">Network Partition</a></p>
</li>
<li>
<p><a href="#source-connection-failure">Source Connection Failure</a></p>
</li>
<li>
<p><a href="#target-redis-connection-failure">Target Redis Connection Failure</a></p>
</li>
<li>
<p><a href="#target-redis-slow-consumer">Target Redis Slow Consumer</a></p>
</li>
<li>
<p><a href="#recovery-time-considerations">Recovery Time Considerations</a></p>
</li>
<li>
<p><a href="#graceful-failure">Graceful Failure</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="redis-connect-instance-failure"><a class="anchor" href="#redis-connect-instance-failure"></a>6.8.1. Redis Connect Instance Failure</h4>
<div class="paragraph">
<p>For high-availability, its best practice to deploy a Redis Connect <a href="#cluster">cluster</a> with <em>n+1</em> redundancy. <em>n</em> is defined as
the minimum number of Redis Connect <a href="#instance">instances</a> with enough <a href="#job-capacity">available capacity</a> to
<a href="#job-execution">execute</a> all staged <a href="#partition">job partitions</a>. <em>+1</em> represent an additional cluster member with
enough available capacity to <a href="#claim">claim</a> the maximum allowable job partitions of a single node.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There is no limit on how many Redis Connect instances can be deployed for redundancy. However, redundancy comes
at a cost, therefore <em>n</em>+1 is simply the minimum recommendation with respect to minimizing costs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the event of a Redis Connect instance failure, each of its claims will inevitably have an expired heartbeat lease.
Once expired, the <a href="#job-reaper">Job Reaper</a> will identify these job partitions and immediately publish a new request to the
<a href="#claim_stream">Job Claim Assignment Stream</a>. Once published, the first <a href="#job-claimer">Job Claimer</a> with available capacity to consume the request will mark
its claim(s) and automatically restart the <a href="#pipeline">pipelines(s)</a> from their last committed
<a href="#checkpoint">checkpoints(s)</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Even if a new Redis Connect instance was quickly restarted on the same virtual machine, for example with
<a href="http://supervisord.org/">supervisord</a>, it would still compete with other cluster members to claim <em>UNASSIGNED</em>
job partitions.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="virtual-machine-cloud-instance-failure"><a class="anchor" href="#virtual-machine-cloud-instance-failure"></a>6.8.2. Virtual Machine / Cloud Instance Failure</h4>
<div class="paragraph">
<p>For high-availability, it is recommended to deploy each Redis Connect <a href="#instance">instance</a> on a separate virtual machine or
cloud instance. Each virtual machine / cloud instance should have access and privileges to every
<a href="#job">jobâ€™s</a> <a href="#source">source</a>, <a href="#target">target</a>, and the Redis Connect <a href="#job-management-database">Job Management Database</a>.</p>
</div>
<div class="paragraph">
<p>For deployment on Kubernetes, see the
<a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/k8s-docs">Redis Connect Kubernetes Docs</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For on-premises deployments, each virtual machine is deployed on its own server rack to avoid a single point of
failure. Similarly, for cloud deployments, cloud instances should be chosen across multiple availability zones.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="network-partition"><a class="anchor" href="#network-partition"></a>6.8.3. Network Partition</h4>
<div class="paragraph">
<p>In the event of a <a href="https://en.wikipedia.org/wiki/Network_partition">network partition</a>, it&#8217;s theoretically possible that
a Redis Connect <a href="#instance">instance</a> can lose access to the <a href="#job-management-database">Job Management Database</a> yet still have access to the <a href="#source">source</a>
and <a href="#target">target</a>. This creates the risk of a <a href="https://en.wikipedia.org/wiki/Split-brain_(computing)">split-brain</a>
scenario, in which case two instances might conclude that they both have a <a href="#claim">claim</a> to the same
<a href="#partition">job partition</a>. If this happened, <a href="#delivery-guarantees">delivery guarantees</a> would be nullified.</p>
</div>
<div class="paragraph">
<p>To avoid a split brain scenario, each job partition queries the Job Management Database, upon <strong>each</strong> iteration of its
<a href="#producer">producer&#8217;s</a> polling interval to validate that their Redis Connect instance&#8217;s claim has not expired.
Therefore, even if the network-partitioned instance still had access to the <a href="#source">source</a> and <a href="#target">target</a>, its producer would
not be able to poll for additional batches once it loses connection to the Job Management Database nor would it be able
to automatically reclaim the job partition when the network partition is remedied.</p>
</div>
<div class="paragraph">
<p>To avoid false-positives, due to momentary network delays, the <a href="#job-claimer">Job Claimer</a> cannot claim a job partition unless
the <a href="#job-reaper">Job Reaper</a> identifies it no longer has a heartbeat lease, therefore even if the network-partitioned instance is
cutoff from the Job Management Database its lease will remain valid for the duration of its
<a href="#job.claim.heartbeat.lease.renewal.ttl">job.claim.heartbeat.lease.renewal.ttl</a>. Only after lease expiration, would the
Job Reaper <em>RELINQUISH</em> the existing claim from the network-partitioned instance and publish a new request to the
<a href="#claim_stream">Job Claim Assignment Stream</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For other permutations of a network partition, such as losing access to either the source or target, there would be
no risk of split-brain since the job partition would attempt its normal reconnection logic and eventually stop streaming.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once events are published to a <a href="#pipeline">data pipeline</a> only the Redis Connect instance with a claim to its job partition
can stop enqueued events from being committed to the target. For <a href="#redis-connect-instance-failure">Redis Connect Instance Failure</a> and
<a href="#virtual-machine-cloud-instance-failure">Virtual Machine / Cloud Instance Failure</a> scenarios, this solves itself since transient queues are also lost, however
during a network partition its possible that the Redis Connect instance is still alive. Therefore, to ensure
<a href="#exactly_once">exactly-once</a> delivery, it&#8217;s important to keep the <a href="#pipelineBufferSize">pipelineBufferSize</a>
correlated to the <a href="#job.claim.heartbeat.lease.renewal.ttl">job.claim.heartbeat.lease.renewal.ttl</a> so ample time is
afforded for it to <a href="#quiesce">quiesce</a> before the claim&#8217;s heartbeat lease expires.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Redis Enterprise has its own split-brain protection so Redis Connect&#8217;s metadata is protected in the event of
a network partition between the primary and backup shards.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="source-connection-failure"><a class="anchor" href="#source-connection-failure"></a>6.8.4. Source Connection Failure</h4>
<div class="paragraph">
<p>Source connections fail for many reasons which are unbeknownst to Redis Connect. Therefore, whether they are intermittent
drop-outs or prolonged outages, the <a href="#producer">producer</a> will always assume that <a href="#source">source</a> connection failure is intermittent
and attempt to re-establish the connection.</p>
</div>
<div class="paragraph">
<p>For this purpose, the following configurations exist to control source connection retry logic:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#sourceConnectionMaxRetryAttempts">sourceConnectionMaxRetryAttempts</a></p>
</li>
<li>
<p><a href="#sourceConnectionMaxRetryDuration">sourceConnectionMaxRetryDuration</a></p>
</li>
<li>
<p><a href="#sourceConnectionRetryDelayInterval">sourceConnectionRetryDelayInterval</a></p>
</li>
<li>
<p><a href="#sourceConnectionRetryMaxDelayInterval">sourceConnectionRetryMaxDelayInterval</a></p>
</li>
<li>
<p><a href="#sourceConnectionRetryDelayFactor">sourceConnectionRetryDelayFactor</a></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title">Example Source Connection Retry Configurations</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json lines">{
  &quot;sourceConnectionMaxRetryAttempts&quot;:4,
  &quot;sourceConnectionMaxRetryDuration&quot;:10,
  &quot;sourceConnectionRetryDelayInterval&quot;:60,
  &quot;sourceConnectionRetryMaxDelayInterval&quot;:600,
  &quot;sourceConnectionRetryDelayFactor&quot;:2
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, if the first attempt to reconnect fails, the producer will wait 60 seconds before attempting its
first retry. If that retry fails, then the producer will wait 60 * 2 = 120 seconds for its second retry, and so on,
until either the sourceConnectionMaxRetryAttempts or sourceConnectionMaxRetryDuration is reached.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="target-redis-connection-failure"><a class="anchor" href="#target-redis-connection-failure"></a>6.8.5. Target Redis Connection Failure</h4>
<div class="paragraph">
<p>Similar to <a href="#source-connection-failure">source connection failures</a>, <a href="#target">target</a> Redis databases also have a retry
logic to handle connection failures. These retries are built into the underlying Redis client (<a href="https://lettuce.io/">Lettuce</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Default Lettuce configurations are typically acceptable with exception to
<a href="#redis.connection.timeout.duration">redis.connection.timeout.duration</a> which might need to be adjusted for production
environments.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="target-redis-slow-consumer"><a class="anchor" href="#target-redis-slow-consumer"></a>6.8.6. Target Redis Slow Consumer</h4>
<div class="paragraph">
<p>Sudden spikes in changed-data events on the <a href="#source">source</a> can quickly outpace <a href="#capacity-estimation">capacity estimations</a>
and throughput limits of existing <a href="#partition">job partitions</a>. To avoid overwhelming their <a href="#pipeline">pipelines</a>,
Redis Connect has built-in back-pressure support which ensures the <a href="#instance">instance</a> will survive and protect against noisy
neighbors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An indicator of this scenario would be an increase in lag between the source and target which can be tracked via
metrics monitoring.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the <a href="#pipelineBufferSize">pipelineBufferSize</a> is reached, a circuit breaker will be triggered to disable the
<a href="#producer">producerâ€™s</a> polling interval until the requisite buffer capacity becomes available. While the pipeline is
iterating through its queued events, the <a href="#partition">job partitionâ€™s</a> producer will periodically check if the circuit
is closed again, so it can publish the next batch of changed-data events.</p>
</div>
<div class="paragraph">
<p>In between each attempt, the producer will sleep for <a href="#intermittentEventSleepDuration">intermittentEventSleepDuration</a>,
which allows the pipeline time to <a href="#quiesce">quiesce</a>. The producer will retry until either the requisite capacity becomes
available or the <a href="#slowConsumerMaxRetryAttempts">slowConsumerMaxRetryAttempts</a> limit is reached. Once reached, the
job will stop.</p>
</div>
<div class="listingblock">
<div class="title">Example Back Pressure Logging</div>
<div class="content">
<pre>18:22:45.359 [JOB_PRODUCER_THREADPOOL-1] INFO redis-connect - Instance: 2468@Allen JobId: {connect}:job:cdc-job:partition:1 skipped polling the source - SlowConsumerRetryAttempt: 1 out of MaxRetryAttempts: 50 - since its replication pipeline's RequiredCapacity: 500 only has AvailableCapacity: 125. Therefore the producer will sleep for IntermittentEventSleepDuration: 3000 before the next attempt. If MaxRetryAttempts == -1, it could iterate forever.</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In production environments, it&#8217;s best practice to manually configure the noted thresholds instead of defaulting to
unlimited retires. Though back-pressure support will protect an imbalance between source and target throughput,
endlessly relying on it will cause an increasing lag which will impact consistency. See <a href="#production-readiness">Production Readiness</a> for
more information on capacity estimation and partitioning.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="recovery-time-considerations"><a class="anchor" href="#recovery-time-considerations"></a>6.8.7. Recovery Time Considerations</h4>
<div class="paragraph">
<p>Assuming there is available <a href="#job-capacity">capacity</a> somewhere across the <a href="#cluster">cluster</a>, recovery time is based on
multiple factors including <a href="#job.reap.attempt.interval">job.reap.attempt.interval</a>,
<a href="#job.claim.attempt.interval">job.claim.attempt.interval</a>,
<a href="#job.claim.heartbeat.lease.renewal.ttl">job.claim.heartbeat.lease.renewal.ttl</a>,
<a href="#checkpoint">checkpoint</a> retrieval time from the <a href="#target">target</a>, and the duration of starting the <a href="#connector">connector</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
It is critical to avoid race-conditions that can cause unexpected behavior between the Job Reaper and
Job Claimer services by allowing some buffer for them to do their work. For example,
<a href="#job.reap.attempt.interval">job.reap.attempt.interval</a> must be at least 2 seconds more than the
<a href="#job.claim.attempt.interval">job.claim.attempt.interval</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="graceful-failure"><a class="anchor" href="#graceful-failure"></a>6.8.8. Graceful Failure</h4>
<div class="paragraph">
<p>Redis Connect <a href="#instance">instances</a> are multi-tenant and multi-threaded which comes with the many advantages described
in <a href="#Redis_Connect_Architecture_Overview">Architecture Overview</a>, however, it is not without risks. One of the
major concerns is around resource utilization.</p>
</div>
<div class="paragraph">
<p>To this end, administrative transition commands (e.g. stop-job, restart-job, and migrate-job) and some unrecoverable
errors during <a href="#job-execution">Job Execution</a> will cause <a href="#partition">job partitions</a> to begin a coordinated process to open circuit
breakers, <a href="#quiesce">quiesce</a> their <a href="#pipeline">data pipeline</a>, close out connections, and cancel any scheduled threads.</p>
</div>
<div class="ulist">
<div class="title">List of exceptions that bypass pipeline quiesce to avoid deadlocks:</div>
<ul>
<li>
<p>io.lettuce.core.RedisException</p>
</li>
<li>
<p>InvalidChangeEventException</p>
</li>
<li>
<p>RedisTransactionFailureException</p>
</li>
<li>
<p>RedisWaitCommandTimeoutException</p>
</li>
<li>
<p>UnrecoverableTargetConnectionException</p>
</li>
<li>
<p>NullPointerException</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="production-readiness"><a class="anchor" href="#production-readiness"></a>7. Production Readiness</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#capacity-estimation">Capacity Estimation</a></p>
</li>
<li>
<p><a href="#operating-system">Operating System</a></p>
</li>
<li>
<p><a href="#environment-variables">Environment Variables</a></p>
</li>
<li>
<p><a href="#logging">Logging</a></p>
</li>
<li>
<p><a href="#monitoring">Monitoring</a></p>
</li>
<li>
<p><a href="#security">Security</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="capacity-estimation"><a class="anchor" href="#capacity-estimation"></a>7.1. Capacity Estimation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="#compute-resources">Compute Resources</a></p>
</li>
<li>
<p><a href="#memory-resources">Memory Resources</a></p>
</li>
<li>
<p><a href="#minimum-resources">Minimum Resources</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="compute-resources"><a class="anchor" href="#compute-resources"></a>7.1.1. Compute Resources</h4>
<div class="paragraph">
<p>Redis Connect has a cloud-native and shared-nothing architecture which allows any <a href="#cluster">cluster</a> node/member/<a href="#instance">instance</a>
to perform both <a href="#job-management">Job Management</a> and <a href="#job-execution">Job Execution</a>. Each Redis Connect instance is multi-threaded and segregates
the control plane (Job Management) from the data plane (Job Execution) so administration does not impact
performance.</p>
</div>
<div class="paragraph">
<p>At the minimum, each Redis Connect <a href="#instance">instance</a> with Job Management enabled, will require 2 vCores to operate its
core services, and an additional vCore if <a href="#metrics-reporter">Metrics Reporter</a> is enabled.</p>
</div>
<div class="paragraph">
<p>For maximum throughput, each Redis Connect instance with Job Execution enabled, will require a vCore per <a href="#stage">stage</a>,
including <a href="#sink">sinks</a>, for each <a href="#partition">partition</a> that can be claimed up to <a href="#job.claim.max.capacity">job.claim.max.capacity</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Any Redis Connect instance, with Job Execution enabled, can eventually claim any job partition, therefore, for
maximum performance it&#8217;s recommended to assume that the jobs with the most stages will all end up on the same instance.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example vCore Estimation per Redis Connect Instance</div>
<div class="content">
<pre>job.claim.max.capacity=2
cluster.timeseries.metrics.enabled=true

Job Management Services = 2 vCores
Metrics = 1 vCore
Job 1 (w/ sink only) = 1 vCore
Job 2 (w/ custom stage + sink) = 2 vCores

Total = 6 vCores per Redis Connect Instance</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Redis Connect instances can be collocated on the same VM / cloud instance, however, each will require fixed vCores
for Job Management. Therefore, for efficiency, it&#8217;s recommended to vertically scale Redis Connect instances by allowing
jobs to be executed multi-tenant instead of deploying many JVMs on the same infrastructure.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="memory-resources"><a class="anchor" href="#memory-resources"></a>Memory Resources</h5>
<div class="paragraph">
<p>Redis Connect is very memory efficient however it&#8217;s still worth nothing which factors might require additional RAM
as instances  scale vertically. For example, each job partition maintains its own <a href="#pipelineBufferSize">pipelineBufferSize</a>
and an in-memory queue within its <a href="#connector">connector</a>. As <a href="#job.claim.max.capacity">job.claim.max.capacity</a> increase so too
will these in-memory buffers.</p>
</div>
<div class="paragraph">
<p>See <a href="#environment-variables">Environment Variables</a> on how to configure the JVM for additional RAM</p>
</div>
</div>
<div class="sect4">
<h5 id="minimum-resources"><a class="anchor" href="#minimum-resources"></a>Minimum Resources</h5>
<div class="listingblock">
<div class="title">Production Environments Minimum Resources</div>
<div class="content">
<pre>4 vCores
4 GB RAM
20 GB of free disk space
1 Gbps networking</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Development Environments Minimum Resources</div>
<div class="content">
<pre>4 vCores
2 GB RAM
20 GB of free disk space
1 Gbps networking</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="operating-system"><a class="anchor" href="#operating-system"></a>7.2. Operating System</h3>
<div class="paragraph">
<p>Redis Connect can be deployed on physical servers, virtual machines, or using Docker on any K8s-based environment.</p>
</div>
<div class="paragraph">
<p>Redis Connect is supported on JAVA versions 11+.</p>
</div>
<div class="paragraph">
<p>For information on deploying to Kubernetes environments, see the
<a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/k8s-docs">Redis Connect Kubernetes documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="environment-variables"><a class="anchor" href="#environment-variables"></a>7.3. Environment Variables</h3>
<div class="paragraph">
<p>Redis Connect requires configuration of several environment variables. Examples of them can be found in the</p>
</div>
<div class="listingblock">
<div class="title">Example taken from startup script included in the Redis Connect distribution.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">REDISCONNECT_MIN_JAVA_VERSION=&quot;11&quot;
REDISCONNECT_HOME=&quot;${REDIS_CONNECT_HOME_DIR}&quot;
REDISCONNECT_JOB_MANAGER_CONFIG_PATH=&quot;$REDISCONNECT_HOME/config/jobmanager.properties&quot;
REDISCONNECT_LOGBACK_CONFIG=&quot;$REDISCONNECT_HOME/config/logback.xml&quot;
REDISCONNECT_LOGBACK_CLI_CONFIG=&quot;$REDISCONNECT_HOME/config/logback-cli.xml&quot;
REDISCONNECT_JAVA_OPTIONS=&quot;-XX:+HeapDumpOnOutOfMemoryError -Xms2g -Xmx4g&quot;
REDISCONNECT_EXTLIB_DIR=&quot;$REDISCONNECT_HOME/extlib&quot;
REDISCONNECT_LIB_DIR=&quot;$REDISCONNECT_HOME/lib/\*:$REDISCONNECT_EXTLIB_DIR/\*&quot;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="logging"><a class="anchor" href="#logging"></a>7.4. Logging</h3>
<div class="paragraph">
<p>Redis Connect uses <a href="https://logback.qos.ch/">Logback</a> for logging.</p>
</div>
<div class="listingblock">
<div class="title">Environment variables to set logging configurations</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">REDISCONNECT_LOGBACK_CONFIG=&quot;$REDISCONNECT_HOME/config/logback.xml&quot;
REDISCONNECT_LOGBACK_CLI_CONFIG=&quot;$REDISCONNECT_HOME/config/logback-cli.xml&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Redis Connect has been designed to provide descriptive logs to make troubleshooting easier.</p>
</div>
<div class="paragraph">
<p>If you need to change your application log level at runtime, you can do this using the <a href="#REST API">REST API</a>.
See the <a href="https://redis-field-engineering.github.io/redis-connect-api-docs/#/LOG%20MANAGEMENT/listLogLevelUsingGET">loglevel REST endpoint
documentation</a> for details.</p>
</div>
<div class="paragraph">
<p>Note that log level changes are not global; they apply only to the instance whose REST API you are connected to.
To change the log level for a given instance, connect directly to that instance&#8217;s REST API.</p>
</div>
<div class="paragraph">
<p>If you need to change your application log level at runtime, you can so with the <a href="#rest-api-swagger-ui">REST API &amp; SWAGGER UI</a> or <a href="#cli">CLI</a>.
See the <a href="https://redis-field-engineering.github.io/redis-connect-api-docs/#/LOG%20MANAGEMENT/listLogLevelUsingGET">REST endpoint documentation</a>
for details.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Log levels are instance specific. To change them globally would require performing the change on each.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="monitoring"><a class="anchor" href="#monitoring"></a>7.5. Monitoring</h3>
<div class="paragraph">
<p>Metrics are enabled by default, but can be disabled by setting <strong>cluster.metrics.enabled</strong> to False.</p>
</div>
<div class="paragraph">
<p>Prometheus metrics are enabled by setting the type of metric (<strong>cluster.metrics.type</strong>) to â€˜OTELâ€™. This is the default, the other option being â€˜REDISâ€™,
which will log metrics as Redisâ€™ TimeSeries objects in the connect configuration database, thus taking advantage of
<a href="https://redis.io/docs/data-types/timeseries/">Redis' time series capabilities</a>, in which case additional data about keys and TTL are available.</p>
</div>
<div class="paragraph">
<p>The port used by OTEL metrics is set by <strong>prometheus.port</strong>, it is set to 19090 by default.</p>
</div>
<div class="paragraph">
<p>The OpenTelemetry metrics are reported for Create/Update/Delete operations for every table configured in the payload file. The metrics generated are
the overall throughput, as well as the lag and latency for each operation, which are reported as histograms. They are tagged so that table and
operation information can be used to report individual operations or operations on a specific table, or they can be aggregated.</p>
</div>
<div class="paragraph">
<p>Tags: job, database, table, partition, operation, stage</p>
</div>
<div class="paragraph">
<p>The sample otel/grafana dashboard looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/dashboard-otel.png" alt="dashboard otel">
</div>
</div>
<div class="paragraph">
<p>Redis Connect exports OpenTelemetry metrics via a Prometheus endpoint. A simple Prometheus configuration would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cmd">- job_name: &quot;connect&quot;
  scrape_interval: 5s
  scrape_timeout: 5s
  metrics_path: /
  scheme: http
  static_configs:
  - targets: [&quot;localhost:19090&quot;]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Redis Connect provides a dashboard for monitoring the system. After installing Grafana and connecting it to Prometheus, i.e., adding a datasource, you can install the Redis Connect dashboard by navigating to the Grafana dashboard page and clicking New &#8594; Import.</p>
</div>
<div class="paragraph">
<p>The Redis Connect dashboard reports the following metrics:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 37.5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metric</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_job_starts_total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">job starts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of times job has been started</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_job_stops_total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">job stops</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of times job has been stopped</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_input_buffer_histogram</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">buffer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">histogram</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of events received</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_input_buffer_count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">buffer count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of measurements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_input_buffer_sum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">buffer total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sum of all measured quantities</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_operation_lag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">histogram</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time it took connect to receive event</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_operation_lag_milliseconds_count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lag count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of measurements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_operation_lag_milliseconds_sum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lag total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sum of all measured quantities</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_operation_latency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">latency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">histogram</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time it took to process the event</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_operation_latency_milliseconds_count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">latency count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of measurements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_operation_latency_milliseconds_sum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">latency total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sum of all measured quantities</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_operation_elapsed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">elapsed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">histogram</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time it took to write event to redis</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_operation_elapsed_milliseconds_count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">elapsed count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of measurements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_operation_elapsed_milliseconds_sum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">elapsed sum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sum of all measured quantities</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event_job_operation_throughput_total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">throughput</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of events processed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>With regards to Redisâ€™ TimeSeries metrics, you can view these metrics in Grafana using
the <a href="https://grafana.com/grafana/plugins/redis-datasource/">Redis Datasource for Grafana</a>.</p>
</div>
<div class="paragraph">
<p>The Redis Connect distribution includes a pre-configured grafana dashboard for viewing key operational metrics in the
../config/samples/dashboard subdirectory. It can be modified to fit the user&#8217;s monitoring requirements/preferences.</p>
</div>
<div class="paragraph">
<p>The sample redis/grafana dashboard looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/dashboard-redis.png" alt="dashboard redis">
</div>
</div>
<div class="paragraph">
<p>Metrics include the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Staged jobs</dt>
<dd>
<p>Set of all <a href="#partition">job partitions</a> that have been assigned to the <a href="#claim_stream">Job Claim Assignment Stream</a> and have not been stopped.</p>
</dd>
<dt class="hdlist1">Job Heartbeats</dt>
<dd>
<p>Heartbeats for the all currently active job partitions.</p>
</dd>
<dt class="hdlist1">Ops per second</dt>
<dd>
<p>The number of create, update, and delete operations against the &lt;&lt;target?? database completed per second.</p>
</dd>
<dt class="hdlist1">Lag</dt>
<dd>
<p>The average elapsed time, in milliseconds, between the commit to the <a href="#source">source</a> <a href="#log">transactional log</a> and the commit to the
<a href="#target">target</a> database. High lag values may indicate that your Redis Connect cluster is failing to keep up with the
volume of changes at the source. Note that this metric only applies to stream jobs.</p>
</dd>
<dt class="hdlist1">Latency</dt>
<dd>
<p>The average elapsed time between, in milliseconds, between the <a href="#producer">producer</a> publishing the changed-data event to the
<a href="#pipeline">data pipeline</a> and the commit to the target database.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In order to enable lad and latency, <a href="#sourceTransactionTimeSequenceEnabled">sourceTransactionTimeSequenceEnabled</a>
must be enabled.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="security"><a class="anchor" href="#security"></a>7.6. Security</h3>
<div class="ulist">
<ul>
<li>
<p><a href="#tlsssl-support">TLS/SSL Support</a></p>
</li>
<li>
<p><a href="#job-management-database-acls">Job Management Database ACLs</a></p>
</li>
<li>
<p><a href="#authentication-credentials">Authentication Credentials</a></p>
</li>
<li>
<p><a href="#securing-credentials-files">Securing Credentials Files</a></p>
</li>
<li>
<p><a href="#credential-rotation">Credential Rotation</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="tlsssl-support"><a class="anchor" href="#tlsssl-support"></a>7.6.1. TLS/SSL Support</h4>
<div class="paragraph">
<p>TLS authentication is often required in production environments whether by one-way or mutual TLS.</p>
</div>
<div class="paragraph">
<p>Redis Connect manages certificate-based authentication using Java&#8217;s KeyStore and TrustStore support.
Java TrustStore and KeyStore can be configured with <a href="#truststore.file.path">truststore.file.path</a> and
<a href="#keystore.file.path">keystore.file.path</a>, respectifully.</p>
</div>
<div class="paragraph">
<p>To configure Redis Enterprise with TLS, see the documentation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.redis.com/latest/rc/security/database-security/tls-ssl/">TLS with Redis Cloud</a></p>
</li>
<li>
<p><a href="https://docs.redis.com/latest/rs/security/tls/">TLS with Redis Enterprise Software</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="job-management-database-acls"><a class="anchor" href="#job-management-database-acls"></a>7.6.2. Job Management Database ACLs</h4>
<div class="paragraph">
<p>Administrators should <strong>never</strong> directly manipulate metadata within the <a href="#job-management-database">Job Management Database</a> without using
either the Redis Connect <a href="#cli">CLI</a> or <a href="#rest-api-swagger-ui">REST API &amp; SWAGGER UI</a>.</p>
</div>
<div class="paragraph">
<p>To avoid innocent mistakes, ACLs should be enabled to limit access and updatability of the metadata to only Redis Connect
instances and privileged administrators.</p>
</div>
<div class="paragraph">
<p>The following policies are recommended:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create separate Redis database users for your Redis Connect instances, Redis Connect administrators, and developers.</p>
</li>
<li>
<p>Developers should be provided with read-only access to these Redis databases.</p>
</li>
<li>
<p>Ensure that any application user connecting Redis Connect&#8217;s Redis databases has <code>dangerous</code> commands disabled.</p>
</li>
<li>
<p>Users should not have permission to delete keys starting with "{connect}". This prevents accidental deletion
of important configuration.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="authentication-credentials"><a class="anchor" href="#authentication-credentials"></a>7.6.3. Authentication Credentials</h4>
<div class="paragraph">
<p>Redis Connect gets its database authentication credentials from properties files stored on the filesystem.
The file <code>redisconnect_credentials_jobmanager.properties</code> is common to all Redis Connect instances.</p>
</div>
<div class="paragraph">
<p>This file provides the following authentication credentials:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Username and password for the Redis database used to store Redis Connect&#8217;s configuration</p>
</li>
<li>
<p>Password for the certificate TrustStore (when applicable)</p>
</li>
<li>
<p>Password for the certificate KeyStore (when applicable)</p>
</li>
<li>
<p>Password for an SMTP mail server, when email alerts are enabled</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition to the job manager&#8217;s credentials, Redis Connect requires two credential files for each job:
one for the source database and another for the target Redis database.</p>
</div>
<div class="paragraph">
<p><strong>Source database credential files</strong> are named according to this scheme:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">redisconnect_credentials_[SOURCE_DB_NAME]_[JOB_NAME].properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, if you have a job where PostgreSQL is the source database, and the job is called "user-replication",
then you will need a properties file called:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">redisconnect_credentials_postgresql_user-replication.properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>target database credentials files</strong> are named as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">redisconnect_credentials_redis_[JOB_NAME].properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>For job called "user-replication", the Redis target database credentials file will be named:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">redisconnect_credentials_redis_user-replication.properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see examples of credentials files in the <code>config/samples/credentials</code> directory of the Redis Connect
distribution.</p>
</div>
</div>
<div class="sect3">
<h4 id="securing-credentials-files"><a class="anchor" href="#securing-credentials-files"></a>7.6.4. Securing Credentials Files</h4>
<div class="paragraph">
<p>Because credentials files store sensitive information in plain text on the filesystem, these files must
have strict permissions. Only authorized users should be able to read and write to these files.</p>
</div>
<div class="paragraph">
<p>As with private key files, these credentials files should be owned by the redis connect user be set read/write only (e.g., chmod 600).</p>
</div>
</div>
<div class="sect3">
<h4 id="credential-rotation"><a class="anchor" href="#credential-rotation"></a>7.6.5. Credential Rotation</h4>
<div class="paragraph">
<p>Redis Connect instances listen for changes to the credentials files. When the contents of these files changes,
Redis Connect will read the changes to ensure that database connectivity is maintained.</p>
</div>
<div class="paragraph">
<p>To enable support for credential rotation in Redis Connection, open <code>jobmanager.properties</code> and ensure that the
credential rotation directives are uncommented. The following configuration enables the credential file listener
and sets it to check for changes every 60 seconds:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>credentials.rotation.event.listener.enabled=true</code></p>
</li>
<li>
<p><code>credentials.rotation.event.listener.interval=60000</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="secrets-management"><a class="anchor" href="#secrets-management"></a>7.6.6. Secrets Management</h4>
<div class="paragraph">
<p>You can use a secrets management framework such as Hashicorp Vault to securely store and rotate credentials.
To use a secrets management framework:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that framework can write property files in a given mounted path on your filesystem.</p>
</li>
<li>
<p>In <code>jobmanager.properties</code>, set the <code>credentials.dir.path</code> to this mounted path.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="high-availability-2"><a class="anchor" href="#high-availability-2"></a>7.7. High availability</h3>
<div class="paragraph">
<p>For high-availability, we recommend that you employ <em>n</em>+1 redundancy as part of your Redis Connect cluster.
In this case, <em>n</em> is defined as the minimum number of Redis Connect instances required to provision all of the
jobs that you intend to run.</p>
</div>
<div class="paragraph">
<p>We also recommend that you deploy each Redis Connect instance on a separate VM. When running in the cloud,
you should ensure that your Redis Connect instances are distributed evenly across cloud availability zones.</p>
</div>
<div class="sect3">
<h4 id="instance-failure-behavior"><a class="anchor" href="#instance-failure-behavior"></a>7.7.1. Instance failure behavior</h4>
<div class="paragraph">
<p>In the event of a Redis Connect instance (JVM) failure, the heartbeat lease of each job partition owned by that instance
expires. Once expired, the job reaper will identify each partition without a heartbeat and immediately publish a job claim
request.</p>
</div>
<div class="paragraph">
<p>Even if a JVM was restarted on the same machine, on which it just failed, it would still need to compete with the other
instances with available capacity to claim the job partitions.</p>
</div>
<div class="paragraph">
<p>It&#8217;s important to understand each jobâ€™s capacity requirements and related settings to calculate how many instances are needed.
For example, if a job with 4 partitions and a setting of <code>maxPartitionsPerClusterMember=2</code> is deployed across a 2-instance cluster,
then even if there are 20 available capacity on each Redis Connect instance, they would be blocked from claiming more of this jobâ€™s
unclaimed partitions in the event of a node failure.</p>
</div>
<div class="paragraph">
<p>It&#8217;s also important to set the Job Manager property <code>job.claim.max.capacity</code> appropriate to the desired redundancy requirement
with respect to all job partitions planned for deployment across the cluster.
For example, if there are 3 cluster nodes each with a goal to deploy a job with 4 partitions, then in order to achieve n+1 redundancy,
each node would have to configure job.claim.max.capacity=2, or more, since the loss of one node would still allow for all 4 partitions
to be claimed.</p>
</div>
</div>
<div class="sect3">
<h4 id="instance-failures"><a class="anchor" href="#instance-failures"></a>7.7.2. Instance failures</h4>
<div class="paragraph">
<p>For high-availability, it is recommended to deploy each Redis Connect instance on a separate VM or cloud availability zone.
For on-premises deployments, extra care should be taken to ensure that each VM is deployed on different underlying server racks
to avoid a single point of failure.</p>
</div>
<div class="paragraph">
<p>Each VM / cloud availability zone should have access to each jobâ€™s source, jobâ€™s target, and the Redis Connect Job Manager database.</p>
</div>
<div class="paragraph">
<p>For deployment on Kubernetes, see the
<a href="https://github.com/redis-field-engineering/redis-connect-dist/tree/main/k8s-docs">Redis Connect Kubernetes Docs</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="network-partitions"><a class="anchor" href="#network-partitions"></a>7.7.3. Network partitions</h4>
<div class="paragraph">
<p>If a network partition occurs, then one side or the other (or both) of the partition needs to stop responding to requests
to maintain the consistency guarantee. If both sides continue to respond to reads and writes while they are unable to communicate
with each other, they will diverge and no longer be consistent. This state where both sides of the partition remain
available is called "split brain".</p>
</div>
<div class="paragraph">
<p>To avoid "split brain", Redis Connect jobs make a call to the job manager database as the initial stage of their
producerâ€™s source event-loop to check if their claim is still valid. Hereâ€™s why that matters.
A job cannot be claimed unless the Job Reaper identifies a staged job without a heartbeat, so until that lease expires,
the claim is intact. Once the heartbeat expires due to the network partition, the Job Reaper will first remove the claim
from the job manager database before publishing a new job claim request.
So even if the original Redis Connect instance has not died, it cannot continue to process additional batches once its
claim is removed nor can it regain its ownership by default when the network partition is remedied.</p>
</div>
<div class="paragraph">
<p>By relying on Redis Enterprise as its source of truth, this cluster architecture is guaranteed to always have a single
job owner at any one point-in-time. This is because the metadata stored within Redis Enterprise has its own split-brain
protection.</p>
</div>
</div>
<div class="sect3">
<h4 id="source-connection-failures"><a class="anchor" href="#source-connection-failures"></a>7.7.4. Source Connection Failures</h4>
<div class="paragraph">
<p>Connections fail for many reasons, both intermittent drop-outs and prolonged outages. Since Redis Connect does not know the
cause of a connection issue, the cluster will always assume that the connection failure is intermittent and attempt to
re-establish the connection.</p>
</div>
<div class="paragraph">
<p>For this purpose, itâ€™s important to set the following configurations within the job source:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sourceConnectionMaxRetryAttempts</code></p>
</li>
<li>
<p><code>sourceConnectionMaxRetryDuration</code></p>
</li>
<li>
<p><code>sourceConnectionRetryDelayInterval</code></p>
</li>
<li>
<p><code>sourceConnectionRetryMaxDelayInterval</code></p>
</li>
<li>
<p><code>sourceConnectionRetryDelayFactor</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of their use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sourceConnectionMaxRetryAttempts=3</code></p>
</li>
<li>
<p><code>sourceConnectionMaxRetryDuration=10</code></p>
</li>
<li>
<p><code>sourceConnectionRetryDelayInterval=60</code></p>
</li>
<li>
<p><code>sourceConnectionRetryMaxDelayInterval=600</code></p>
</li>
<li>
<p><code>sourceConnectionRetryDelayFactor=3</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Based on the above, if the first attempt to connect fails, then the process waits 60 seconds before attempting its first retry.</p>
</div>
<div class="paragraph">
<p>If the retry fails, then the process waits 60 * 3 = 180 seconds for its second retry, and so on, up until the max delay interval between retries.</p>
</div>
</div>
<div class="sect3">
<h4 id="target-redis-connection-failures"><a class="anchor" href="#target-redis-connection-failures"></a>7.7.5. Target Redis Connection Failures</h4>
<div class="paragraph">
<p>Just like sources, Redis target connections have a retry mechanism.
However, these retries are built into the underlying Redis client (a.k.a., <a href="https://lettuce.io/">Lettuce</a>).
For production environments, we recommend using the default Redis connection settings.</p>
</div>
</div>
<div class="sect3">
<h4 id="target-redis-slow-consumer-2"><a class="anchor" href="#target-redis-slow-consumer-2"></a>7.7.6. Target Redis Slow Consumer</h4>
<div class="paragraph">
<p>Itâ€™s possible that the rate of incoming changed-data events and outgoing sink commits becomes unbalanced due to a slowdown
on the target database, usually because of network congestion. To avoid overwhelming the job pipeline queue, the combination of the
following settings helps to provide back-pressure support:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>slowConsumerMaxRetryAttempts</p>
</li>
<li>
<p>intermittentEventSleepDuration</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once the pipeline queue becomes full, a circuit breaker will be triggered to disable the producerâ€™s polling event-loop
until the requisite pipeline capacity becomes available.
While the pipeline is iterating through its queued events,
the jobâ€™s producer will periodically attempt to publish the remainder of its current batch.</p>
</div>
<div class="paragraph">
<p>In between each attempt, the producer will sleep (based on intermittentEventSleepDuration), which allows the pipeline
time to catch up.
This loop will continue until either the required capacity becomes available or the <code>slowConsumerMaxRetryAttempts</code> limit
is reached. Once reached, the job will stop.</p>
</div>
<div class="paragraph">
<p>In production, we recommend that you set <code>slowConsumerMaxRetryAttempts</code> to a reasonable setting instead of making
it unlimited or disabling it.
This is where proper capacity estimation and partitioning will become critical since you donâ€™t want to stop the job
unnecessarily due to a network disruption nor large spike in volume.
In other words, even if a single partition can handle the entire throughput on a regular basis,
it might be worthwhile to partition the deployment so that a sudden spike in throughput or a slow consumer does not
bring down the job.</p>
</div>
</div>
<div class="sect3">
<h4 id="recovery-time-considerations-2"><a class="anchor" href="#recovery-time-considerations-2"></a>7.7.7. Recovery Time Considerations</h4>
<div class="paragraph">
<p>Redis Connectâ€™s job management processes are scheduled threads that periodically wake up to perform their service.
While itâ€™s not critical to understand the internals of the cluster architecture, it is relevant to be aware of the balance
between job claim heartbeats and the Job Reaper service.</p>
</div>
<div class="paragraph">
<p>As mentioned previously, when a job partition is claimed it begins a heartbeat lease which has a
TTL set by <code>job.claim.heartbeat.lease.renewal.ttl</code>. If the lease cannot be renewed before expiry, the Job Reaper
service will remove the current ownerâ€™s claim based on the assumption that its Redis Connect instance is no longer alive.</p>
</div>
<div class="paragraph">
<p>This service is performed based on a fixed interval set by job.reap.attempt.interval. Once the job claim is removed,
each eligible Redis Connect instance will attempt to claim the job partition.
This Job Claim service is also based on a fixed interval set by job.claim.attempt.interval.</p>
</div>
<div class="paragraph">
<p>Since each interval is started at a different point-in-time (and some services have more work to do than others),
itâ€™s impossible to synchronize all the moving parts. However, it is critical to avoid scenarios that can cause unexpected
behavior by giving enough buffer between associated services. For example, <code>job.reap.attempt.interval</code> must be at least
2 seconds more than <code>job.claim.attempt.interval</code> to avoid sending multiple job claim requests for the same partition.
This relates to recovery because each default interval can potentially add up to over a minute in recovery time inclusive
of the actual start job process. Therefore, if instant recovery is critical to production SLAs, our recommendation is to
consider the balance between separate services and as well as the stability of your network.
If these settings are set too low, itâ€™s possible that a network disruption can unnecessarily
start the recovery process on a healthy job.</p>
</div>
<div class="paragraph">
<p>See <a href="#Cluster Configuration">Cluster Configuration</a> for details on setting these properties.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="multi-region-deployment"><a class="anchor" href="#multi-region-deployment"></a>7.8. Multi-region deployment</h3>
<div class="paragraph">
<p>Redis Enterprise lets you replicate databases across regions using
<a href="https://docs.redis.com/latest/rs/databases/active-active/develop/">active-active</a> and
<a href="https://docs.redis.com/latest/rs/databases/import-export/replica-of/">active-passive</a> deployment topologies.</p>
</div>
<div class="paragraph">
<p>If you deploy your Redis Enterprise databases across regions, you also need to consider how you will deploy Redis Connect
and how you will recover if you lose a region. Let&#8217;s consider a real-world scenario.</p>
</div>
<div class="paragraph">
<p>Suppose your data infrastructure is divided between two regions: West and East.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Your primary data center resides in the West.</p>
</li>
<li>
<p>You source database for CDC is Postgres, and this database is hosted in the West.</p>
</li>
<li>
<p>Your target database is a Redis Enterprise active-active or active-passive database with replicas in both West and East data centers. Because
the target database stores checkpoints for CDC, Redis Connect will be able to recover from where it stopped in the event of a failover.</p>
</li>
<li>
<p>Your Redis Connect job manager database is a Redis Enterprise database deployed in the West region. You have also provisioned
a job manager database in the East region. This East database will not contain any configuration until you fail over.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In a scenario like this one, we recommend running a Redis Connect cluster in the West and maintaining a cold standby cluster
in the East. Running Redis Connect entirely in one region ensure a low-latency CDC pipeline.</p>
</div>
<div class="paragraph">
<p>As usual, we also recommend deploying at least two Redis Connect instances in each region, which will provide
high availability within that region.</p>
</div>
<div class="sect3">
<h4 id="disaster-recovery"><a class="anchor" href="#disaster-recovery"></a>7.8.1. Disaster recovery</h4>
<div class="paragraph">
<p>Redis Connect provides high availability within a single region; however, failover to a secondary region requires some
planning and manual intervention. Continuing with the example above, you need a plan to fail over to the East data center and
start a cold standby Redis Connect cluster.</p>
</div>
<div class="paragraph">
<p>First, ensure that you can start an equivalent Redis Connect cluster in the East.
The means deploying the same number of Redis Connect instances you have in the West. Let&#8217;s call this the "cold standby cluster".</p>
</div>
<div class="paragraph">
<p>The cold standby cluster instances in the East should maintain a local configuration nearly identical to the instances
in the West, with a few important caveats:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Instances in the East will need to connect to a job manager database in the East. This means that you will need to
pre-provision a job manager database in your Redis Enterprise East cluster.</p>
</li>
<li>
<p>Instances in the East will use the East target database for CDC. This means that all job configurations running
in the East should point to the Redis Enterprise as the target database in the East.</p>
</li>
<li>
<p>You need to determine how Redis Connect jobs will connect their source, in this case Postgres. Will you have a
secondary Postgres server in the East that your instances can connect to? If so, your CDC jobs will need to be configured
to point to this database. In addition, this database must have equivalent transaction logs to the database in the West
so that Redis Connect can continue reading from the same offset checkpoints.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here&#8217;s a summary of the configuration differences between the live Redis Connect cluster in the West and the cold
standby in the East:</p>
</div>
<table id="properties" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Cluster properties</caption>
<colgroup>
<col style="width: 11.7647%;">
<col style="width: 17.647%;">
<col style="width: 23.5294%;">
<col style="width: 23.5294%;">
<col style="width: 23.5295%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Region</strong></th>
<th class="tableblock halign-left valign-top"><strong>Instances deployed</strong></th>
<th class="tableblock halign-left valign-top"><strong>jobmanager.properties</strong></th>
<th class="tableblock halign-left valign-top"><strong>CDC source</strong></th>
<th class="tableblock halign-left valign-top"><strong>CDC target</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>West</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;= 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis.connection.url</code> points to <strong>West</strong> jobmanager database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job configuration JSON points to CDC source in <strong>West</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job configuration JSON points to <strong>West</strong> target database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>East</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;= 2 (and equal to West)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis.connection.url</code> points to <strong>East</strong> jobmanager database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job configuration JSON points to CDC source in <strong>East</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job configuration JSON points to <strong>East</strong> target database</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="failover-procedure"><a class="anchor" href="#failover-procedure"></a>7.8.2. Failover procedure</h4>
<div class="paragraph">
<p>If your West region becomes unavailable, and you decide to manually fail over, you can fail over to East as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop all Redis Connect instances in the West (if they&#8217;re still running).</p>
</li>
<li>
<p>Ensure that source, target, and job configuration databases are accessible in the East.</p>
</li>
<li>
<p>Verify that transaction logs for the source are still available in the East.</p>
</li>
<li>
<p>Start your cold standby Redis Connect instances in the East.</p>
</li>
<li>
<p>Start your CDC jobs by submitting your CDC JSON configuration files using Redis Connect&#8217;s REST API.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-overview"><a class="anchor" href="#configuration-overview"></a>8. Configuration Overview</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#cluster-instance-configuration">Cluster Instance Configuration</a></p>
</li>
<li>
<p><a href="#job-configuration">Job Configuration</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="cluster-instance-configuration"><a class="anchor" href="#cluster-instance-configuration"></a>8.1. Cluster Instance Configuration</h3>
<div class="paragraph">
<p>The most basic Redis Connect instance configuration includes the URL of the Redis database used to store the cluster&#8217;s state.
This URL is specified with the property <code>redis.connection.url</code> in <code>jobmanager.properties</code>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a sample <code>jobmanager.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="comment">#####     Cluster properties                                  </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="error">cluster.name=default</span>

<span class="comment">#####     Job Manager Database properties                     </span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="error">redis.connection.url=redis://127.0.0.1:14001</span>
<span class="error">redis.connection.auto.reconnect=true</span>

<span class="comment">#####     Credentials properties                              </span><i class="conum" data-value="3"></i><b>(3)</b>
<span class="error">credentials.dir.path=/usr/local/redis-connect/credentials</span>
<span class="error">credentials.rotation.event.listener.enabled=true</span>

<span class="comment">#####     REST properties                                     </span><i class="conum" data-value="4"></i><b>(4)</b>
<span class="error">rest.api.enabled=true</span>
<span class="error">rest.api.port=8282</span>

<span class="comment">#####     Job Manager Services properties                     </span><i class="conum" data-value="5"></i><b>(5)</b>
<span class="error">job.manager.services.enabled=true</span>
<span class="error">job.manager.services.threadpool.size=2</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <strong><a href="#cluster-configurations">cluster properties</a></strong> define general Redis Connect cluster configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <strong><a href="#job-manager-database-properties">job manager database properties</a></strong> determine which database Redis Connect uses to store its configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <strong><a href="#job-manager-credentials-properties">credentials properties</a></strong> tell Redis Connect where to find <a href="#secrets-management">credentials files</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <strong><a href="#job-management">REST properties</a></strong> determine whether the REST API is enabled and how it runs.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The <strong><a href="#job-manager-services-properties">job manager services properties</a></strong> lets you specify the resources to
allocate for job managements on this JVM.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="job-configuration"><a class="anchor" href="#job-configuration"></a>8.2. Job Configuration</h3>
<div class="paragraph">
<p>Redis Connect runs one or more <strong>change-data capture jobs</strong>.
Each job reads data from a source database and ultimately writes that data to a Redis target database.
A job is defined by a JSON document.
To create a job, you submit this JSON document using the <a href="#job-management">REST API or CLI</a>.
Once a job is submitted, the Redis Connect cluster leader will schedule the job among available instances.</p>
</div>
<div class="paragraph">
<p>The following section shows how to construct a JSON-based configuration for a job.
To see several real-world Job configurations, open the <code>config/samples/payloads</code> folder in the Redis Connect distribution.</p>
</div>
<div class="sect3">
<h4 id="job-configuration-format"><a class="anchor" href="#job-configuration-format"></a>8.2.1. Job configuration format</h4>
<div class="paragraph">
<p>Every job configuration has at least three top-level keys: partitions, source, and pipeline.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">partitions</span><span class="delimiter">&quot;</span></span> : <span class="error">N</span><span class="error">U</span><span class="error">M</span><span class="error">B</span><span class="error">E</span><span class="error">R</span><span class="error">_</span><span class="error">O</span><span class="error">F</span><span class="error">_</span><span class="error">P</span><span class="error">A</span><span class="error">R</span><span class="error">T</span><span class="error">I</span><span class="error">T</span><span class="error">I</span><span class="error">O</span><span class="error">N</span><span class="error">S</span>,    <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span>: { <span class="error">S</span><span class="error">O</span><span class="error">U</span><span class="error">R</span><span class="error">C</span><span class="error">E</span><span class="error">_</span><span class="error">J</span><span class="error">S</span><span class="error">O</span><span class="error">N</span><span class="error">_</span><span class="error">D</span><span class="error">E</span><span class="error">F</span><span class="error">I</span><span class="error">N</span><span class="error">I</span><span class="error">T</span><span class="error">I</span><span class="error">O</span><span class="error">N</span> },   <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="key"><span class="delimiter">&quot;</span><span class="content">pipeline</span><span class="delimiter">&quot;</span></span>: { <span class="error">T</span><span class="error">A</span><span class="error">R</span><span class="error">G</span><span class="error">E</span><span class="error">T</span><span class="error">_</span><span class="error">J</span><span class="error">S</span><span class="error">O</span><span class="error">N</span><span class="error">_</span><span class="error">D</span><span class="error">E</span><span class="error">F</span><span class="error">I</span><span class="error">N</span><span class="error">I</span><span class="error">T</span><span class="error">I</span><span class="error">O</span><span class="error">N</span> }  <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <strong><a href="#partition">partitions</a></strong> field defines the level of parallelism to use when running the job.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <strong><a href="#job-source-properties">Job Source Properties</a></strong> field stores configuration for the job&#8217;s source database (e.g., MySQL, Oracle, etc.)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <strong><a href="#job-pipeline-properties">Job Pipeline Properties</a></strong> field stores configuration for the target of the job.
This includes custom transformations and the target Redis database.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here&#8217;s a more detailed job configuration with some of these valued filled in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">partitions</span><span class="delimiter">&quot;</span></span> : <span class="integer">1</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">database</span><span class="delimiter">&quot;</span></span>: {                      <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="key"><span class="delimiter">&quot;</span><span class="content">databaseType</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">POSTGRES</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">databaseURL</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:postgresql://127.0.0.1:5432/RedisConnect</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">customConfiguration</span><span class="delimiter">&quot;</span></span>: {         <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="key"><span class="delimiter">&quot;</span><span class="content">database.dbname</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">RedisConnect</span><span class="delimiter">&quot;</span></span>,
      }
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">tables</span><span class="delimiter">&quot;</span></span>: {                        <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="key"><span class="delimiter">&quot;</span><span class="content">public.emp</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">columns</span><span class="delimiter">&quot;</span></span>: [
          { <span class="key"><span class="delimiter">&quot;</span><span class="content">targetColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">empno</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">sourceColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">empno</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">targetKey</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>},
          { <span class="key"><span class="delimiter">&quot;</span><span class="content">targetColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">hiredate</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">sourceColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">hiredate</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">DATE_TIME</span><span class="delimiter">&quot;</span></span>}
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">initialLoad</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">partitions</span><span class="delimiter">&quot;</span></span>: <span class="integer">4</span>
        },
        <span class="key"><span class="delimiter">&quot;</span><span class="content">autoConfigColumnsEnabled</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
      }
    }
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">pipeline</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">stages</span><span class="delimiter">&quot;</span></span>: [                         <i class="conum" data-value="3"></i><b>(3)</b>
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">index</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">stageName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">REDIS_HASH_SINK</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">database</span><span class="delimiter">&quot;</span></span>: {                   <i class="conum" data-value="4"></i><b>(4)</b>
          <span class="key"><span class="delimiter">&quot;</span><span class="content">credentialsDirectoryPath</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">../config/samples/credentials</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">databaseURL</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">redis://127.0.0.1:14000</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">databaseType</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">REDIS</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">customConfiguration</span><span class="delimiter">&quot;</span></span>: {      <i class="conum" data-value="5"></i><b>(5)</b>
            <span class="key"><span class="delimiter">&quot;</span><span class="content">redis.connection.sslEnabled</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">truststore.file.path</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">../config/samples/credentials/client-truststore.jks</span><span class="delimiter">&quot;</span></span>
          }
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A <strong><a href="#database-configuration">database configuration</a></strong> for the database that Redis Connect reads from.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A <strong><a href="#job-source-table-properties">tables configuration</a></strong> specifying which tables to read from.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The list of <strong><a href="#job-pipeline-stage-properties">stages</a></strong>, which always ends with the Redis target database.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <strong><a href="#database-configuration">database configuration</a></strong> for the target database. The final stage in the pipeline is
always the Redis target database.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that all <strong><a href="#database-configuration">database configuration</a></strong> objects include a
<strong><a href="#custom-database-properties">customConfiguration</a></strong> field.
&lt;5&gt; The <strong><a href="#custom-database-properties">customConfiguration</a></strong> field lets you pass in database-specific configurations.
For example, Postgres has a <code>database.dbName</code> field that is unique to Postgres.</p>
</div>
</div>
<div class="sect3">
<h4 id="submitting-a-job-configuration"><a class="anchor" href="#submitting-a-job-configuration"></a>8.2.2. Submitting a job configuration</h4>
<div class="paragraph">
<p>To save a job configuration, construct your JSON payload and then submit it using the REST API&#8217;s
<a href="#create-job-endpoint">create job endpoint</a>. When you submit this configuration, you will also
provide a unique job name. This job name will be used in the naming of your credentials files.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="credentials-files"><a class="anchor" href="#credentials-files"></a>8.3. Credentials files</h3>
<div class="paragraph">
<p>Credentials files store authentication credentials for the databases used by Redis Connect.</p>
</div>
<div class="paragraph">
<p>The location of these credentials files is specified at the <code>credentials.dir.path</code> properties in <code>jobmanager.properties</code>.
To learn about which credentials are required, see the <a href="#authentication-credentials">authentication credentials</a>
subsection.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configurations"><a class="anchor" href="#configurations"></a>9. Configurations</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#cluster-configurations">Cluster Configurations</a></p>
</li>
<li>
<p><a href="#job-configuration-main">Job Configurations</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="cluster-configurations"><a class="anchor" href="#cluster-configurations"></a>9.1. Cluster Configurations</h3>
<table id="properties" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Cluster properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cluster.name <a id="cluster.name"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata purposes only. Non-functional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cluster.leader.heartbeat.lease.renewal.ttl <a id="cluster.leader.heartbeat.lease.renewal.ttl"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TTL (Time-to-Live) which is renewed upon each <code class="lime">cluster.election.attempt.interval</code> iteration by the cluster leader.</p>
<p class="tableblock">Measured in milliseconds with a minimum of 1 second (1000 ms).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cluster.election.attempt.interval <a id="cluster.election.attempt.interval"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed rate scheduled thread which either renews or elects a new cluster leader.
Runs on each Redis Connect Instance (JVM) when <code class="lime">job.manager.services.enabled=true</code>.</p>
<p class="tableblock">Measured in milliseconds with a minimum of 1 second (1000 ms)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cluster.timeseries.metrics.enabled <a id="cluster.timeseries.metrics.enabled"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables creation of a scheduled thread for job metrics reporting to RedisTimeSeries within the job manager database.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="job-manager-services-properties"><a class="anchor" href="#job-manager-services-properties"></a>9.2. Job manager services properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Job manager services properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">job.manager.services.enabled <a id="job.manager.services.enabled"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables creation of scheduled thread(s) to participate in cluster leader elections, facilitate
REST API / CLI (Job Manager service), and identify staged jobs without a heartbeat lease (Job
Reaper service).</p>
<p class="tableblock">When this property is disabled, the Redis Connect instance may still
participate in job execution and job claim attempts (Job Claimer service).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">job.manager.services.threadpool.size <a id="job.manager.services.threadpool.size"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For non-production deployments, one thread is adequate.
In production, we recommend two threads.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">job.reap.attempt.interval <a id="job.reap.attempt.interval"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The interval between attempts to identify staged jobs without a heartbeat lease.
Implemented as a scheduled thread that runs on each Redis Connect Instance (JVM)
when <code class="lime">job.manager.services.enabled=true</code>.</p>
<p class="tableblock">Measured in milliseconds with a minimum of 1 second (1000 ms)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">job.claim.service.enabled <a id="job.claim.service.enabled"></a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables creation of scheduled thread(s) to attempt to claim ownership for UNASSIGNED staged jobs (Job Claimer Service),
job execution, and job-level metrics reporting (Metrics Reporter service).</p>
<p class="tableblock">When this property is disabled, the Redis Connect instance may still participate in cluster leader election,
facilitate REST API / CLI, and perform Job Reaper services.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">job.claim.attempt.interval <a id="job.claim.attempt.interval"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval at which this scheduled thread attempts to claim ownership for UNASSIGNED staged jobs.</p>
<p class="tableblock">Runs on each Redis Connect Instance (JVM) when <code class="lime">job.claim.service.enabled=true</code>.</p>
<p class="tableblock">Measured in milliseconds with a minimum of 1 second (1000 ms)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">job.claim.batch.size.per.attempt <a id="job.claim.batch.size.per.attempt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies how many jobs can be claimed per attempt interval.
If a sparse topology across many Redis Connect instances is desired, then lowering this interval is recommended.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">job.claim.max.capacity <a id="job.claim.max.capacity"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the maximum number of jobs that a single Redis Connect instance can claim at any given time.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">job.claim.heartbeat.lease.renewal.ttl <a id="job.claim.heartbeat.lease.renewal.ttl"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TTL (Time-to-Live) which is renewed upon each iteration of a fixed rate scheduled thread that shares its value.</p>
<p class="tableblock">Measured in milliseconds with a minimum of 1 second (1000 ms)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="rest-api-properties"><a class="anchor" href="#rest-api-properties"></a>9.3. REST API Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. REST API properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rest.api.enabled <a id="rest.api.enabled"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instantiates an embedded Spring Boot Application to host the REST API and CLI.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rest.api.port <a id="rest.api.port"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the port used for the REST API (and SWAGGER) powered by an embedded Spring Boot Application.</p>
<p class="tableblock">If you are running multiple Redis Connect instances on the same server, each instance will require a different port
for its REST API.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8282</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="job-manager-database-properties"><a class="anchor" href="#job-manager-database-properties"></a>9.4. Job Manager Database Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Job Manager Database Properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.connection.url <a id="redis.connection.url"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Redis URI indicating which Redis server to use for job management.</p>
<p class="tableblock">For the Redis URI spec, the <a href="https://lettuce.io/core/release/api/io/lettuce/core/RedisURI.html">Lettuce documentation</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.connection.insecure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passed to Lettuce&#8217;s <code class="lime">RedisURI.verifyPeer</code>.</p>
<p class="tableblock">If true then verifyMode=FULL. Otherwise, if false, then verifyMode=NONE.</p>
<p class="tableblock">When peer verification is disabled, Lettuce uses Netty&#8217;s InsecureTrustManagerFactory.INSTANCE as the trust manager factory.
Its javadoc notes that it should never be used in production and that it is purely for testing purposes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.connection.timeout.duration <a id="redis.connection.timeout.duration"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timeout is canceled upon command completion/cancellation.
Measured in seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.connection.auto.reconnect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determine whether the driver will attempt to automatically reconnect to Redis.</p>
<p class="tableblock">When enabled, then on disconnect, the client will try to reconnect, activate the connection and re-issue any queued commands.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.connection.suspend.reconnect.
on.protocol.failure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set to <code class="lime">true</code>, reconnect will be suspended on protocol errors.</p>
<p class="tableblock">The reconnect itself has two phases:
Socket connection and protocol/connection activation.
In case a connection timeout occurs, a connection reset, or host lookup fails, this does not affect the cancellation of
commands. In contrast, where the protocol/connection activation fails due to SSL errors or PING before activating
connection failure, queued commands are canceled.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.connection.sslEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables SSL for one-way or mutual authentication.
If this flag is set to <code class="lime">false</code>, TrustStore and KeyStore will not be passed to the client.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="job-manager-credentials-properties"><a class="anchor" href="#job-manager-credentials-properties"></a>9.5. Job Manager Credentials Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Job Manager Credentials Properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">truststore.file.path <a id="truststore.file.path"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File path of the Java TrustStore (containing certificates trusted by the client)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">keystore.file.path <a id="keystore.file.path"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File path of the Java KeyStore, which stores private key entries, certificates with public keys,
or any other secret keys used for various cryptographic purposes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">credentials.dir.path <a id="credentials.dir.path"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the directory containing the Redis Connect credentials file.
This directory path must include a properties file named <code class="lime">redisconnect_credentials_jobmanager.properties</code>
<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">../config/
samples/
credentials</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">credentials.rotation.event.listener.enabled <a id="credentials.rotation.event.listener.enabled"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set to <code class="lime">true</code>, a listener will be created on the <code class="lime">redisconnect_credentials_jobmanager.properties</code> file within the
<code>credentials.dir.path</code> to rotate credentials when they change.</p>
<p class="tableblock">This lets you rotate credentials without restarting your Redis Connect instance.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">credentials.rotation.event.listener.interval <a id="credentials.rotation.event.listener.interval"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When <code class="lime">credentials.rotation.event.listener.enabled</code> is set to <code class="lime">true</code>, this flag sets the frequency at which
is scanned for changes.</p>
<p class="tableblock">Measured in milliseconds with a minimum of 60 seconds (60000 ms)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60000</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="email-alerting-properties"><a class="anchor" href="#email-alerting-properties"></a>9.6. Email Alerting Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Email Alerting Properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.alert.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables email alerts when any error forces a job to stop.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostname of the outgoing mail server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">smtp.gmail.com</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the non-SSL port number of the outgoing mail server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">587</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.start.tls.enable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set or disable STARTTLS encryption<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.start.tls.required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set or disable the required STARTTLS encryption.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The email address to send alerts to.</p>
<p class="tableblock">This email address will also be used as the personal name.
Multiple recipients can be added by delimiting them with a comma.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.debug</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set session debugging on or off.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="job-configuration-main"><a class="anchor" href="#job-configuration-main"></a>10. Job Configurations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the fields in job configuration payload.</p>
</div>
<div class="sect2">
<h3 id="job-properties"><a class="anchor" href="#job-properties"></a>10.1. Job properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Job properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jobName <a id="jobName"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique name for a job.</p>
<p class="tableblock">This name is used to derive all other Redis metadata keys related to the job execution workflow.</p>
<p class="tableblock">Note: the jobName property is submitted separately from the job configuration when saving a job.
In other words, jobName does not appear in the job configuration payload.</p>
<p class="tableblock">Note: jobName should not be confused with jobId. jobIds are created as part of a job claim.
They add-on a namespace to the jobName to identify the jobType and partitionId (if jobType=PARTITIONED_STREAM)
<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">partitions <a id="stream_partitions"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates how many partitions to create during startJob process.
This attribute is ONLY used to partition a job with jobType=PARTITIONED_STREAM. Not jobType=LOAD.</p>
<p class="tableblock"><code class="red"><strong>CAUTION: Once a job has started, and job claims are created, a job cannot be repartitioned without deleting all job claims and existing
checkpoints. Please reach out to Support to assist with the migration of checkpoints to avoid undesired outcomes.</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxPartitionsPerClusterMember <a id="maxPartitionsPerClusterMember"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of job partitions that can be claimed, and executed, on the same Redis Connect instance (JVM).</p>
<p class="tableblock">If the limit forces partitions to span more instances than are currently deployed, then the job will not be able to
start nor migrate
<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pipeline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#job-pipeline-properties">Job Pipeline Properties</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">source</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#job-source-properties">Job Source Properties</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Null</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="job-pipeline-properties"><a class="anchor" href="#job-pipeline-properties"></a>10.2. Job Pipeline Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Job Pipeline Properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pipelineBufferSize <a id="pipelineBufferSize"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis Connectâ€™s pipeline is powered by the LMAX Disruptor library (High Performance Inter-Thread Messaging).</p>
<p class="tableblock">Must be a power of 2, minimum 1024
<sup class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4096</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">preprocessorName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Functional interface (Consumer) that can be run before changed-data events are transformed and published to the pipeline.</p>
<p class="tableblock">This is currently not extendable by end users.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">postprocessorName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Functional interface (Consumer) that can be run after changed-data events are transformed and published to the pipeline.</p>
<p class="tableblock">This is currently not extendable by end users.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job
Pipeline
Stage[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#job-pipeline-stage-properties">Job Pipeline Stage Properties</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="job-pipeline-stage-properties"><a class="anchor" href="#job-pipeline-stage-properties"></a>10.3. Job Pipeline Stage Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Job Pipeline Stage Properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stageName <a id="stageName"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique name which is used as an exact match reference to a custom-built target sink or a user-defined
<a href="#custom-stages">custom stage</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">index <a id="stageIndex"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the sequence in which the stages of the pipeline should be orchestrated.</p>
<p class="tableblock">Begins with 1 and each subsequent index should increment by 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metricsEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, the target sink stage will report throughput and latency related metrics for persistence in
RedisTimeSeries. This can subsequently be visualized in Grafana.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metricsRetentionInHours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum duration for metrics samples as compared to the highest reported timestamp before they expire.</p>
<p class="tableblock">Measured in hours; minimum is 1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkpointStageIndicator <a id="checkpointStageIndicator"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates which sink will be responsible for committing the checkpoint to the target database.
This is typically performed by the last stage of the pipeline and, often times, it is the only stage in the pipeline.
Job pipeline can only have a single stage with checkpointStage
<code class="lime">Indicator=true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false
checkpointTransactionsEnabled <a id="checkpointTransactionsEnabled"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkpointTransactionsEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Although the producerâ€™s polling event loop enqueues changed-data events in batches, each event is processed
individually through the pipeline. This is because Redis Connect updates the checkpoint at the changed-data event level
and not the batch
<sup class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">keyPrefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a prefix to the target Redis key before the tableName and composition of targetKey enabled columns.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">userDefinedType <a id="userDefinedType"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To create a <a href="#custom-stages">custom stage</a>, a factory interface must be extended so that Redis Connect can have
visibility to it from a class loading perspective. See section X.X.X.</p>
<p class="tableblock">The interface will force the user to create a <code class="lime">getType()</code> method which returns a unique String to represent the custom
factory.
This property must exactly match that custom unique String so that Redis Connect can properly discover and handle it as a
custom stage.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#database-configuration">Database Configuration</a>
Configuration for all target database configuration.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkpointDatabase</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#database-configuration">Database Properties</a>
Checkpoint database configuration.
This is required only if Redis is not the target destination (which is only supported when Splunk is the target).</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="job-source-properties"><a class="anchor" href="#job-source-properties"></a>10.4. Job Source Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Job Source Properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pollSourceInterval <a id="pollSourceInterval"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed rate interval representing how long to pause the producerâ€™s polling event loop if no new change events were found in the batch.
Measured in milliseconds; minimum is 5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">batchSize <a id="batchSize"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum # of events to dequeue from the source-event-queue AND maximum # of events to query from the source transaction log/table/queue upon each
interval of the producerâ€™s polling event loop. Minimum is 1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceTransactionTimeSequenceEnabled <a id="sourceTransactionTimeSequenceEnabled"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, the source commit/transaction timestamp (and sequence# if the timestamp is the same) will be used to calculate latency metrics and
passed along as metadata for Redis Streams sink(s).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">slowConsumerMaxRetryAttempts <a id="slowConsumerMaxRetryAttempts"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1 = UNLIMITED</p>
<p class="tableblock">0 = DISABLED</p>
<p class="tableblock">1+ = MAX_ATTEMPTS</p>
<p class="tableblock">Used as part of back-pressure support for the data pipeline in the event of a slow consumer.
If the maximum attempts limit is reached, the job will be stopped for purposes of manual intervention.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">intermittentEventSleepDuration <a id="intermittentEventSleepDuration"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used as part of back-pressure support for the data pipeline in the event of a slow consumer or the circuit breaker is open.
Forces the event loop to pause for the configured duration of time.
Measured in milliseconds, minimum is 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceConnectionMaxRetryAttempts <a id="sourceConnectionMaxRetryAttempts"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 = DISABLED</p>
<p class="tableblock">1+ = MAX_ATTEMPTS</p>
<p class="tableblock">Maximum retry attempts to reconnect with the source in the event that a connection is lost. Minimum is 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceConnectionMaxRetryDuration <a id="sourceConnectionMaxRetryDuration"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In addition to sourceConnectionMaxRetryAttempts, you can also add a max duration, after which retries will stop if the max attempts havenâ€™t already
been reached.</p>
<p class="tableblock">Measured in minutes; minimum is 1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceConnectionRetryDelayInterval <a id="sourceConnectionRetryDelayInterval"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed delay in between sourceConnectionMaxRetryAttempts.</p>
<p class="tableblock">Measured in seconds; minimum is 0<sup class="footnote">[<a id="_footnoteref_7" class="footnote" href="#_footnotedef_7" title="View footnote.">7</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceConnectionRetryMaxDelayInterval <a id="sourceConnectionRetryMaxDelayInterval"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides an upper bound to calculate the delay interval when sourceConnectionRetryDelayFactor is enabled.</p>
<p class="tableblock">Measured in seconds, minimum is 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">240</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceConnectionRetryDelayFactor <a id="sourceConnectionRetryDelayFactor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 = DISABLED</p>
<p class="tableblock">1+ = DELAY_FACTOR</p>
<p class="tableblock">Factor by which delays are exponentially increased after each source connection retry attempt. Minimum is 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#database-configuration">Database Configuration</a></p>
<p class="tableblock">Configuration for all source databases. Not Null.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tables</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map&lt;String, Table&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#job-source-table-column-properties">Job Source Table Column Properties</a></p>
<p class="tableblock">Configuration for all source tables/collections/regions/logs properties.</p>
<p class="tableblock">Each table within the map requires a unique name which will be used as part of target key composition. Not Null.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="job-source-database-properties"><a class="anchor" href="#job-source-database-properties"></a>10.5. Job Source Database Properties</h3>
<div class="paragraph">
<p>See <a href="#database-configuration">Database Configuration</a>.</p>
</div>
<div class="sect3">
<h4 id="job-source-table-properties"><a class="anchor" href="#job-source-table-properties"></a>10.5.1. Job Source Table Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Job Source Table Properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">autoConfigColumnsEnabled <a id="autoConfigColumnsEnabled"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, source metadata is queried during the (re)start process to determine sourceColumn names so users do not
need to enumerate each within the column&#8217;s configuration.</p>
<p class="tableblock">The columns configuration can be used to override source metadata (i.e., targetName, type, etc.). However, targetKey
designation cannot be overridden since only the source tableâ€™s primary key will be used.</p>
<p class="tableblock">This is a common configuration in POCs and development environments since the design of Redis key names are less
important than in production. It also allows for less knowledge about the source table schema.</p>
<p class="tableblock">This is only supported for RDBMS sources.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dynamicSchemaEnabled <a id="dynamicSchemaEnabled"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, columns that are not provided in the columns configuration will be passed through, as-is, to the target.
This is currently only supported for MongoDB, Redis Streams Broker, and Files.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prefixTableNameToTargetKeyEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, adds the tableName (defined in the tables configuration) as a prefix to the target Redis key before all other targetKey enabled columns are computed and applied.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deleteOnPrimaryKeyUpdateEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, if the primary key is changed at the source, then an additional operation to DELETE the existing target
key will accompany the UPDATE event.</p>
<p class="tableblock">This is only supported for RDBMS sources since primary key changes require a delete and insert of a new row.</p>
<p class="tableblock">The DELETE event shares an offset with the UPDATE event both at the source and checkpoint. Redis Connect will handle them within a single pipeline
iteration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">changedColumnsOnlyEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, only allows changed (delta) column values to be replicated to the target. This does not include targetKey column(s) which cannot be
bypassed.
When disabled, all column values will be replicated to the target unless they are individually bypassed at the column-level using
changedColumnOnlyEnabled. (See Section 4.2.2)
<sup class="footnote">[<a id="_footnoteref_8" class="footnote" href="#_footnotedef_8" title="View footnote.">8</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">columns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job
Source
Table
Column[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#job-source-table-column-properties">Job Source Table Column Properties</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Null</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">initialLoad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial Load</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#job-source-table-initial-load-properties">Job Source Table Initial Load Properties</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="job-source-table-column-properties"><a class="anchor" href="#job-source-table-column-properties"></a>10.6. Job Source Table Column Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Job Source Table Column Properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">targetKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Designates this columnâ€™s value as part of the targetâ€™s key composition process.
When more than one column is designated, the order in which they are listed will impact the order in which they are appended to the key.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceColumn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exact match identifier for source column name. Must not be empty.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">targetColumn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preferred field name to be used in the target. Must not be empty.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifies the source columnâ€™s data type which is used to transform the column value to a properly formatted String within the target.
Supported types include: [STRING, VARCHAR, TEXT, INT, DATE, DATE_TIME, BYTE, DEC, NUMERIC, DECIMAL, DOUBLE, FLOAT, LONG, SHORT, RAW, BLOB, CLOB,
HASHMAP, CUSTOM]</p>
<p class="tableblock">CUSTOM data type is unique in that it bypasses column value transformation to a String which allows it to be converted manually within a Custom
Stage. An example would be converting to a proprietary Oracle Timestamp format. Failure to convert this data type manually will cause errors in
Redis-based sinks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">changedColumnOnlyEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, only allows changed (delta) column values to be replicated to the target unless targetKey is enabled.
When changedColumnsOnlyEnabled=true at the table-level, this flag will be overridden.
This is currently only supported for RDBMS sources.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">passThroughEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When disabled, the source column value will not be published to the pipeline therefore it cannot be accessed within a
custom stage nor any sink.
The purpose of this flag is to allow source column values to be used for targetKey composition without adding the
columnâ€™s name/value pair as a field within the target. As an example, this is common for sources like MongoDB which
generate a "_id" key which can be used as a targetKey but has no value as a field.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">index</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is currently for metadata purposes only and has no functional value.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dateFormat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by DATE and DATE_TIME type to override their default.</p>
<p class="tableblock">Default formats are as follows:</p>
<p class="tableblock">DATE = YYYY-MM-dd</p>
<p class="tableblock">DATE_TIME = YYYY-MM-dd HH:mm:ss.S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nullFormat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users can define how a column value=NULL will be represented in the target.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default is an EMPTY String.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="job-source-table-initial-load-properties"><a class="anchor" href="#job-source-table-initial-load-properties"></a>10.7. Job Source Table Initial Load Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Job Source Table Column Properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">partitions <a id="intial_load_partitions"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the number of partitions to create during startJob process.</p>
<p class="tableblock">This attribute is ONLY used to partition an initial load with jobType=LOAD.</p>
<p class="tableblock">Each table should be partitioned based on its own size and release window SLAs.</p>
<p class="tableblock">Itâ€™s common practice to leverage more partitions for an initial load than when streaming.
Please see the Production Readiness section for more detail.
Disclaimer: If the source table has fewer than 500 rows, which is common in a dev environment,
all but partition:1 will be stopped so all the rows are loaded from a single partition.</p>
<p class="tableblock">Minimum is 1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxPartitionsPerClusterMember</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limits how many task partitions can be claimed, and executed, multi-tenant on the same Redis Connect instance (JVM).</p>
<p class="tableblock">If the limit forces partitions to span more nodes than are currently deployed, then the initial load will queue the instantiation of tasks until
capacity is reallocated (e.g. earlier tasks complete their load partition).</p>
<p class="tableblock">This is not a job-level limit; it is only specific at the table level.
0 represents no limit. Minimum is 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">customWhereClause</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users can specify a WHERE clause to filter the rows required for initial load.
Only the following sources are supported:</p>
<p class="tableblock">- RDBMS sources support JDBC compliant WHERE statements</p>
<p class="tableblock">- MongoDB supports a BSON filter</p>
<p class="tableblock">- Gemfire supports an Apache Geode WHERE Clause</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rowIndexUsedAsTargetKeyEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RDBMS sources can have tables without primary keys. For those cases, rowIndex can be used as a unique identifier for partitioning purposes.
This is only supported for RDBMS sources and only for initial load only / ETL jobs.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="database-configuration"><a class="anchor" href="#database-configuration"></a>11. Database Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These properties are available for all <strong>database</strong> configuration objects.
You will find database configuration objects in a job configuration&#8217;s source and in the job configuration&#8217;s
pipeline, which specified the target database.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Database Properties</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connectionType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Distinguishes between Job Manager, Job Source, Job Target, and Job Checkpoint databases.</p>
<p class="tableblock">This field is auto-generated.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">databaseType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enumeration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The following database types are supported:</p>
<p class="tableblock">[DB2, FILES, GEMFIRE, MONGODB, ORACLE, POSTGRES, REDIS, REDIS_STREAMS_MESSAGE_BROKER, SPLUNK, SQL_SERVER, VERTICA]</p>
<p class="tableblock">NONE is used for custom stages. Also see userDefinedType.</p>
<p class="tableblock">This is a required field.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">databaseURL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database URLs specify the subprotocol (the database connectivity mechanism), the database, or server identifier, and a list of properties.</p>
<p class="tableblock">Not required for Gemfire, Splunk, and Files databaseTypes.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">credentialsDirectoryPath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each database type other than NONE (used for custom jobs) requires a credentials property file,
even if the credentials are not required.
Credentials property files must adhere to the following filename pattern:
redisconnect_credentials_{source_type | target_type}_{job_name}.properties</p>
<p class="tableblock">The only exception is for Job Manager which has fixed name: <code class="lime">redisconnect_credentials_jobmanager.properties</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">credentialsRotationEventListenerEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, the credentialsDirectoryPath will be periodically scanned for changes that are specific to the
property file associated with this database<sup class="footnote">[<a id="_footnoteref_9" class="footnote" href="#_footnotedef_9" title="View footnote.">9</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">credentialsRotationEventListenerInterval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed rate scheduled interval that scans the credentialsDirectoryPath for changes when credentialsRotationEventListenerEnabled is enabled.
Measured in milliseconds; minimum is 60000.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60000</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="custom-database-properties"><a class="anchor" href="#custom-database-properties"></a>12. Custom Database Properties</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="rdbms-properties"><a class="anchor" href="#rdbms-properties"></a>12.1. RDBMS Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Stream Job Type Custom Configurations</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">column.exclude.list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional, comma-separated list of regular expressions that match the fully-qualified names of columns to exclude from change event record values.
Fully-qualified names for columns are of the form <code class="aqua"><em>databaseName.tableName.columnName</em></code>.
To match the name of a column, Debezium applies the regular expression that you specify as an anchored regular expression. That is, the specified
expression is matched against the entire name string of the column; it does not match substrings that might be present in a column name. If you
include this property in the configuration, do not also set the column.include.list property.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">decimal.handling.mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies how the connector should handle values for DECIMAL and NUMERIC types:
â€œstringâ€ encodes values as formatted strings, which is easy to consume but semantic information about the real type is lost.
â€œpreciseâ€ represents them precisely using java.math.BigDecimal values represented in change events in a binary form.
â€œdoubleâ€ represents them using double values, which may result in a loss of precision but is easier to use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">heartbeat.interval.ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls how frequently the connector sends heartbeat messages.
Heartbeat messages are useful for ensuring the source transaction/redo logs and checkpoint are updated on a predictable basis. This can avoid a long
period without updates which may cause a gap between the latest checkpoint and an archived transaction log that has been deleted.
Default (0) does not send heartbeat messages.
Measured in milliseconds; minimum is 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max.batch.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the maximum size of each batch of events that should be processed during each iteration of the producerâ€™s polling event loop; minimum is
1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2048</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max.queue.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Positive integer value that specifies the maximum number of records that the blocking queue can hold. When Debezium reads events streamed from the
database, it places the events in the blocking queue before it writes them to Kafka. The blocking queue can provide backpressure for reading change
events from the database in cases where the connector ingests messages faster than it can write them to Kafka, or when Kafka becomes unavailable.
Events that are held in the queue are disregarded when the connector periodically records offsets. Always set the value of max.queue.size to be
larger than the value of max.batch.size.</p>
<p class="tableblock"><code class="red"><strong>Note: max.queue.size &gt; max.batch.size</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8192</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">snapshot.mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the criteria for running a snapshot when the connector starts. It is not recommended to use this debezium capability for initial load in Production. See <a href="#production-readiness">Production Readiness</a> for more information.
MySQL, Postgres default to 'never'; Oracle, SQL Server default to 'schema_only'
<sup class="footnote">[<a id="_footnoteref_10" class="footnote" href="#_footnotedef_10" title="View footnote.">10</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Initial Load Job Type Custom Configurations</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc.connection.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum duration the pool will wait for a connection to become available. Measured in milliseconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc.keepalive.time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed interval to keep a connection alive, in order to prevent it from being timed out by the database or network infrastructure.
A â€œkeepaliveâ€ will only occur on an idle connection.
Default: 0 (disabled)
Measured in milliseconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc.idle.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes effect only when the jdbc.min.idle is less than jdbc.max.pool.size, and is removed when the number of idle connections exceeds the
jdbc.min.idle and the idle time exceeds jdbc.idle.timeout.
If (jdbc.idle.timeout + 1 second) &gt; jdbc.max.lifetime and jdbc.max.lifetime &gt; 0, it will be reset to 0.
If jdbc.idle.timeout != 0 and less than 10 seconds, it will be reset to 10 seconds.
If jdbc.idle.timeout=0, idle connections will never be removed from the connection pool.
Measured in milliseconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">600000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc.max.lifetime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum duration a connection is allowed to remain open. When this timeout is exceeded, the next time the connection is released to the pool it is
closed, and a new connection is opened to replace it.
Measured in milliseconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1800000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc.max.pool.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of connections in the pool.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#partitions + 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc.min.idle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls the minimum number of connection pool idle connections. When the connection pool idle connections are less than jdbc.min.idle and the total
number of connections is not more than jdbc.max.pool.size, it will try its best to supplement new connections.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#partitions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">truststore.file.path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Holds onto certificates that identify 3rd parties.
truststore.type	JKS	String	For Java keystore file format, this property has the value jks (or JKS). You do not normally specify this property,
because its default value is already jks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">keystore.file.path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stores private key entries, certificates with public keys, or just secret keys that we may use for various cryptographic purposes.
keystore.type	JKS	String	Depending on what entries the keystore can store and how the keystore can store the entries, there are a few
different types of keystores in Java: JKS, JCEKS, PKCS12, PKCS11 and DKS.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="mongodb-properties"><a class="anchor" href="#mongodb-properties"></a>12.2. MongoDB Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 19. Stream Job Type Custom Configurations</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connect.backoff.initial.delay.ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial delay when trying to reconnect to a primary after the first failed connection attempt or when no primary is available.
Measured in milliseconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connect.backoff.max.delay.ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum delay when trying to reconnect to a primary after repeated failed connection attempts or when no primary is available.
Measured in milliseconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connect.max.attempts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of failed connection attempts to a replica set primary before an exception occurs and task is aborted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mongodb.authsource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database (authentication source) containing MongoDB credentials. This is required only when MongoDB is configured to use authentication with another
authentication database than admin.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">admin.connection.pool.max.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of connections opened in the pool.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connection.pool.min.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of connections opened in the pool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connection.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum duration to establish a connection before an error is thrown. Depending on network infrastructure and load on the server, the client may
have to wait for a connection establishment. Possible scenarios where connection timeout can happen â€“ the server gets shut down, network issues,
wrong IP/DNS, port number etc.
Measure in milliseconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mongodb.ssl.invalid.hostname.allowed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When SSL is enabled, this setting controls whether strict hostname checking is disabled during connection phase. If true, the connection will not
prevent man-in-the-middle attacks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">read.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum duration to send or receive on a socket before an error is thrown. â€œ0â€ default indicates disabling the timeout. Measured in milliseconds."</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mongodb.ssl.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables TLS/SSL connection.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="files-connector-properties"><a class="anchor" href="#files-connector-properties"></a>12.3. Files Connector Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 20. Initial Load Job Type Custom Configurations</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">charset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a mapping between sequences of sixteen-bit UTF-16 code units (that is, sequences of chars) and sequences of bytes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">column.names</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a header row is not provided, column names can be configured manually. Order matters for proper association.
Supported for delimited types. CSV, PSV, TSV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">continuation.identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any arbitrary String (special characters) to concatenate multiple sequential lines.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\\</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delimiter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequence of one or more characters for specifying the boundary between separated column-values.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">,</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">google.cloud.storage.project.id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier for a project within the GCP console.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gzip.file.format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gzip is a file format and a software application used for file compression and decompression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">header.line</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies which row is the header line since some delimited file types have comments or other non-column related headers.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">included.fields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whitelist of fields/columns that should be included for replication. All others will be ignored.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includes.header</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Most delimited file types include a header row which can be used to name each column.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">initial.offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies row/offset from which all scanning should begin inclusive of the header line in delimited types.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">source.file.path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location of the file to be loaded.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quote.character</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Char</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avoids syntax errors when double quotes are used within field values. Any character can be used as a substitute.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported file formats include: CSV, JSON, PSV, TSV, XML.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="gemfire-properties"><a class="anchor" href="#gemfire-properties"></a>12.4. Gemfire Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 21. Custom Configurations</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">function.filter.batch.size</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.free.connection.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of milliseconds (ms) that the client waits for a free connection if max-connections limit is configured and all connections are in use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.idle.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of milliseconds to wait for a connection to become idle for load balancing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.locator.host</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.locator.port</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.load.conditioning.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval in which the pool checks to see if a connection to a specific server should be moved to a different server to improve the load balance.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300000 (5m)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.max.connections</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of connections that the pool can create. If all connections are in use, an operation requiring a client-to server-connection is
blocked until a connection is available or the free-connection-timeout is reached. If set to -1, there is no maximum. The setting must indicate a cap
greater than min-connections
<sup class="footnote">[<a id="_footnoteref_11" class="footnote" href="#_footnotedef_11" title="View footnote.">11</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.min.connections</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of connections that must be created initially.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.multiuser.authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the pool to use multi-user secure mode. If in multiuser mode, then app needs to get RegionService instance of Cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.ping.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval between pinging the server to show the client is alive, set in milliseconds. Pings are only sent when the ping-interval elapses between
normal client messages. This must be set lower than the serverâ€™s maximum-time-between-pings.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.pr.single.hop.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Setting used for single-hop access to partitioned region data in the servers for some data operations. See PartitionResolver. See note in
thread-local-connections below.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.read.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of milliseconds to wait for a response from a server before the connection times out.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.retry.attempts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of times to retry an operation after a time-out or exception for high availability. If set to -1, the pool tries every available server once
until it succeeds or has tried all servers.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.server.group</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server group from which to select connections. If not specified, the global group of all connected servers is used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.socket.buffer.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of the socket buffer, in bytes, on each connection established.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32768</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.socket.connect.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amount of time (in seconds) to wait for a response after a socket connection attempt.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">59</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.statistic.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default frequency, in milliseconds, with which the client statistics are sent to the server. A value of -1 indicates that the statistics are not
sent to the server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.subscription.ack.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of milliseconds to wait before sending an acknowledgment to the server about events received from the subscriptions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.subscription.message.tracking.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of milliseconds for which messages sent from a server to a client are tracked. The tracking is done to minimize duplicate events.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">90000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.subscription.redundancy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redundancy for servers that contain subscriptions established by the client. A value of -1 causes all available servers in the specified group to be
made redundant.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pool.subscription.timeout.multiplier</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gf:queue:seq</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="redis-target-properties"><a class="anchor" href="#redis-target-properties"></a>12.5. Redis Target Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 22. Event Handler Custom Configurations</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">domain.strategy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enumeration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the domain model that will be used to move data through the pipeline so that custom stages and
targets are aligned.
Domain Strategies include:
DICTIONARY: passes all entities.</p>
<p class="tableblock">KEY_ONLY: passes only key.</p>
<p class="tableblock">STRING: passes key and single string blob.</p>
<p class="tableblock">MESSAGE_BROKER: passes String[] with strict schema</p>
<p class="tableblock">KEY_ONLY is used for invalidation and notification.
STRING is used with REDIS_STRING_SINK.
MESSAGE_BROKER is used for brokered deployments that stream data through Redis Streams.
Only Splunk is currently supported for MESSAGE_BROKER.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">databaseURL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See Lettuceâ€™s documentation for Redis URI syntax -</p>
<p class="tableblock"><a href="https://lettuce.io/core/release/api/io/lettuce/core/RedisURI.html" class="bare">https://lettuce.io/core/release/api/io/lettuce/core/RedisURI.html</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.connection.insecure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passed to Lettuceâ€™s RedisURI.verifyPeer.
If true then verifyMode=FULL, else if false then verifyMode=NONE.
When peer verification is disabled, Lettuce uses Netty&#8217;s InsecureTrustManagerFactory.INSTANCE as the trust manager factory. Itâ€™s javadoc notes that
it should never be used in production and that it is purely for testing purposes."	FALSE
redis.connection.timeout.duration	Integer	"Command timeout begins:
When the command is sent successfully to the transport.</p>
<p class="tableblock">Queued while the connection was inactive.</p>
<p class="tableblock">The timeout is canceled upon command completion/cancellation.
Measured in seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.connection.auto.reconnect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls auto-reconnect behavior on connections. As soon as a connection gets closed/reset without the intention to close it, the client will try to
reconnect, activate the connection and re-issue any queued commands.
This flag also has the effect that disconnected connections will refuse commands and cancel these with an exception.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.connection.suspend.reconnect.on.protocol.failure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this flag is true the reconnect will be suspended on protocol errors. The reconnect itself has two phases: Socket connection and
protocol/connection activation.
In case a connection timeout occurs, a connection reset, host lookup fails, this does not affect the cancellation of commands. In contrast, where the
protocol/connection activation fails due to SSL errors or PING before activating connection failure, queued commands are canceled.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.connection.sslEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables use of SSL for one-way or mutual authentication. If this flag is false, truststore and keystore will not be passed to the client.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.streams.max.length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis will trim the stream from the oldest entries when it reaches the number of entries specified in redis.streams.max.length. The stream could
have more entries than specified in the command before Redis starts deleting entries.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.streams.passthrough.source.tx.time.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis Stream IDs are specified by two numbers separated by a - character. The first part is the Unix time in milliseconds of the Redis instance
generating the ID. The second part is just a sequence number and is used in order to distinguish IDs generated in the same millisecond.
When enabled, the source commit timestamp can be used to manually set the first part of the Redis Stream ID.
Caution - time order is strictly enforced.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.streams.sink.partitions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REDIS_STREAMS_SINK can partition the Redis Streams keys to which it will commit.
This is complementary to job-level partitioning and does not replace it.
If only the sink is partitioned a partition Id would be appended to the end of the Redis Streams key (e.g. key:2).
If the sink is partitioned and the job was partitioned then first the job partition id would be appended to the Redis Streams key followed by the
sink partition id (e.g. key:2:4).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="redis.wait.enabled"></a> redis.wait.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blocks sinkâ€™s commit from successfully completing until acknowledgment that the data was replicated to a backup Redis database shard.
If checkpointTransactionsEnabled=true, the checkpoint will be rolledback to before this change occurred to avoid inconsistency and duplication.
If checkpointTransactionsEnabled=false, the checkpoint won&#8217;t be rolled back so on restart the operation would be duplicated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.wait.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the timeout is reached, the sinkâ€™s commit will fail and the consequence will be based on redis.wait.timeout.stop.job.enabled.
Measured in milliseconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.wait.timeout.stop.job.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If enabled, the job will be stopped and the <a href="#quiesce">quiesce</a> process will be bypassed on the assumption that Redis is unavailable.
If disabled, the error will be logged but the job will continue to operation. This introduces the risk that the data could be
lost if the primary shard fails.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="redis-message-broker-properties"><a class="anchor" href="#redis-message-broker-properties"></a>12.6. Redis Message Broker Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 23. Stream Job Type Custom Configurations</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.broker.eviction.strategy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enumeration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If domain.strategy=MESSAGE_BROKER, Redis Streams is used as an event-stream(s) therefore requires cleanup to avoid running out of memory.
To evict change-data events that are beyond the need for recovery, the following two options exist:
THRESHOLD - evicts based on queue depth.</p>
<p class="tableblock">SCHEDULER - evicts based on a scheduled thread.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">THRESHOLD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.broker.eviction.scheduled.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed rate scheduled thread that evicts Redis Stream offsets that occurred before the oldest existing checkpoint.
Measured in seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.broker.eviction.threshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed queue depth threshold which triggers a separate thread to evict Redis Stream offsets that occurred before the oldest existing checkpoint.</p>
<p class="tableblock">If redis.streams.eviction.strategy=THRESHOLD
and redis.streams.eviction.threshold is not provided
and job type is PARTITIONED_STREAM
then redis.streams.eviction.threshold=redis.streams.max.length / partitions;</p>
<p class="tableblock">If redis.streams.eviction.strategy=THRESHOLD
and redis.streams.eviction.threshold is not provided
and job type is STREAM
then (redis.broker.max.queue.depth * 7) / 10;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">redis.broker.max.queue.depth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to calculate redis.broker.eviction.threshold if itâ€™s not manually configured.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32768</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="splunk-stream-properties"><a class="anchor" href="#splunk-stream-properties"></a>12.7. Splunk Stream Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 24. Job Type Custom Configurations</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">httpHeaders</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">source.time.field.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">source.time.sequence.field.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authorization.stored.in.credentials.file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">splunk.forwarder.destination.url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">http.post.max.retry.attempts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">http.post.max.retry.duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">http.post.retry.delay.factor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">http.post.retry.delay.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">http.post.retry.max.delay.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="in-memory-queue-properties"><a class="anchor" href="#in-memory-queue-properties"></a>12.8. In-Memory Queue Properties</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 25. Change Event Queue Custom Configurations</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 10%;">
<col style="width: 47%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Default</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="poll.interval.ms"></a> poll.interval.ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed rate interval that specifies the number of milliseconds the connector should wait for new changed-data events to appear before it starts
processing a batch of events.
Measured in milliseconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max.batch.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum events that can be dequeued by the source poll event loop within a single iteration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16384</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max.queue.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the maximum number of records that the blocking queue can hold.
<sup class="footnote">[<a id="_footnoteref_12" class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32768</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queue.persistence.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, batches of changed-data events are persisted to Redis Stream, before they are enqueued within the in-memory queue, which effectively
mimics a change-data-capture (CDC) process within Redis Connect.
<sup class="footnote">[<a id="_footnoteref_13" class="footnote" href="#_footnotedef_13" title="View footnote.">13</a>]</sup>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queue.persistence.wait.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blocks persistence from successfully completing until acknowledgment that the data was replicated to a backup Redis database shard completed.	FALSE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">queue.persistence.wait.timeout</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Redis Connect never caches or persists credentials. Therefore, on each connection with the source, target, or job manager database, the credentials are read from a file. This enhances security and allows for seamless credential rotations and integration with secret management frameworks such as HashiCorp Vault.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. StartTLS is an extension of the SMTP protocol that tells the email server that the email client wants to use a secure connection using TLS or SSL.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. When jobName is used in logging or administrative processes (i.e., stopJob), the jobName represents ALL job partitions. Must be between 4 and 50 characters.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. For example, if maxPartitionsPerClusterMember=1 and partitions=3, then the Redis Connect cluster will require at least 3 instances (JVMs) each with at least 1 available capacity to claim a job partition.  This is not a global limit; it is only specific at the job level 0 represents no limit
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. The buffer size sets the number of slots allocated within the Disruptorâ€™s internal ring buffer "queue".  Increasing the buffer size will impact the JVM heap space required to store all transient changed data events within the queue. For most cases, this can be left as default.
</div>
<div class="footnote" id="_footnotedef_6">
<a href="#_footnoteref_6">6</a>. When enabled, the checkpoint will be committed as part of an atomic Redis transaction. This eliminates consistency issues and improves performance. Rollback capability is built in to handle any failure scenarios during the transaction so that no data will be lost.  When disabled, the checkpoint will be committed after the the changed-data events are written. This adds another network round trip for each changed-data event.  While distributed checkpoints have distinct advantages, there is a small tradeoff. Because Redis keys are bound by their hash-slots, distributed checkpoints require that we store one checkpoint per hash slot.  When enabled, each job partition will have its own 16384 checkpoint keys created in the target database. With ~250 bytes per checkpoint, each partitionâ€™s estimated overhead is ~4MB. When disabled, there is only a single checkpoint key in the target per partition. Distributed checkpoints require RediSearch. We use RediSearch to index checkpoint keys so that recovery from the latest checkpoint is immediate
</div>
<div class="footnote" id="_footnotedef_7">
<a href="#_footnoteref_7">7</a>. sourceConnectionRetryDelayInterval must be &lt; than sourceConnectionRetryDelayInterval
</div>
<div class="footnote" id="_footnotedef_8">
<a href="#_footnoteref_8">8</a>. When enabled, the column-level changedColumnOnlyEnabled flag will be overridden for all columns other than those designated as targetKey(s).  This is currently only supported for RDBMS sources
</div>
<div class="footnote" id="_footnotedef_9">
<a href="#_footnoteref_9">9</a>. If a change is identified, the listener will create a new connection without bringing down the Redis Connect instance nor stopping the job. There might be a momentary pause in pipeline processing while the connection is being reestablished. No data will be lost in this process.  Disclaimer: if the new credentials cannot be used to create a connection, the job will be stopped for manual intervention.
</div>
<div class="footnote" id="_footnotedef_10">
<a href="#_footnoteref_10">10</a>. Possible settings are:  initial - the connector runs a snapshot only when no offsets have been recorded for the logical server name.  initial_only - the connector runs a snapshot only when no offsets have been recorded for the logical server name and then stops; i.e. it will not read change events from the binlog.  when_needed - the connector runs a snapshot upon startup whenever it deems it necessary. That is, when no offsets are available, or when a previously recorded offset specifies a binlog location or GTID that is not available in the server.  never - the connector never uses snapshots. Upon first startup with a logical server name, the connector reads from the beginning of the binlog. Configure this behavior with care. It is valid only when the binlog is guaranteed to contain the entire history of the database.  schema_only - the connector runs a snapshot of the schemas and not the data. This setting is useful when you do not need the topics to contain a consistent snapshot of the data but need them to have only the changes since the connector was started.  schema_only_recovery - this is a recovery setting for a connector that has already been capturing changes. When you restart the connector, this setting enables recovery of a corrupted or lost database schema history topic. You might set it periodically to "clean up" a database schema history topic that has been growing unexpectedly. Database schema history topics require infinite retention
</div>
<div class="footnote" id="_footnotedef_11">
<a href="#_footnoteref_11">11</a>. If you use this setting to cap your pool connections, deactivate the pool attribute pr-single-hop-enabled. Leaving single hop activated can increase thrashing and lower performance.
</div>
<div class="footnote" id="_footnotedef_12">
<a href="#_footnoteref_12">12</a>. The blocking queue provides backpressure for reading changed data events from the source in cases where the connector ingests messages faster than they are consumed. Events that are held in the queue are disregarded when the connector periodically records offsets. Always set the value of maxQueueSize to be larger than the value of maxBatchSize
</div>
<div class="footnote" id="_footnotedef_13">
<a href="#_footnoteref_13">13</a>. Persistence allows for recovery of transient changed-data events which is critical for sources like Splunk that do not implement their own change-data-capture (CDC) process. Only supported by Gemfire and Splunk
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.11.0<br>
Last updated 2024-05-14 14:15:27 -0600
</div>
</div>
</body>
</html>